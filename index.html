<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Electoy Studio - AI ë®¤ì§ ìŠ¤íŠœë””ì˜¤</title>
    <!-- í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬: React, ReactDOM, Babel, Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Pretendard', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            overflow: hidden; 
            height: 100vh;
            background-color: #020617;
            color: #e2e8f0;
        }
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        /* ì‹œì¸ì„± ì¢‹ì€ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; border: 2px solid #020617; }
        
        /* ì„¸ë ¨ëœ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
        @keyframes rotate-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-rotate-slow { animation: rotate-slow 25s linear infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 5s ease-in-out infinite; }
        @keyframes star-blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }
        .star { position: absolute; background: white; border-radius: 50%; animation: star-blink var(--duration) ease-in-out infinite; }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 15px rgba(168, 85, 247, 0.3); } 50% { box-shadow: 0 0 30px rgba(168, 85, 247, 0.5); } }
        .animate-pulse-glow { animation: pulse-glow 4s infinite; }

        /* UI ìŠ¤íƒ€ì¼ ìµœì í™” (ìƒ‰ìƒ ë  ì œê±° ë° ëª¨ë˜í•œ ìŠ¤íƒ€ì¼) */
        .active-tab { background: #334155; color: white !important; border: 1px solid #94a3b8 !important; }
        .modal-overlay { background: rgba(0, 0, 0, 0.96); backdrop-filter: blur(10px); z-index: 100; }
        
        .editable-area {
            width: 100%;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 1rem;
            padding: 1.5rem;
            color: #f8fafc;
            font-size: 1.1rem;
            line-height: 1.7;
            outline: none;
            resize: none;
            font-weight: 500;
        }

        .revision-input {
            background: #1e293b;
            border: 1px dashed #475569;
            border-radius: 1rem;
            padding: 1.2rem;
            color: #e2e8f0;
            width: 100%;
            min-height: 100px; 
            font-size: 1.05rem;
            outline: none;
            transition: all 0.2s;
        }
        .revision-input:focus { border-color: #94a3b8; background: #334155; }

        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23cbd5e1'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.2em;
        }
        input[type="range"] { accent-color: #94a3b8; }

        .persona-badge {
            background: #1e293b;
            color: #cbd5e1;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 1px solid #475569;
            white-space: nowrap;
        }

        .entrance-overlay {
            position: fixed;
            inset: 0;
            z-index: 200;
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }
        .entrance-overlay::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(2, 6, 23, 0.8);
            z-index: -1;
        }
        .entrance-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        /* ê³µí†µ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ - ìƒ‰ìƒ ë  ì œê±° ë° í†µì¼ */
        .card-container {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.2s;
        }
        .card-container:active {
            transform: scale(0.98);
        }

        .mood-chip, .inst-chip {
            padding: 10px 14px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.2s;
            border: 1px solid #334155;
            background: #1e293b;
            color: #94a3b8;
        }
        .mood-chip.selected, .inst-chip.selected {
            background: #334155;
            border-color: #cbd5e1;
            color: #ffffff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        .library-item {
            background: #1e293b;
            border: 1px solid #334155;
            transition: all 0.2s;
        }
        .library-item:hover {
            border-color: #94a3b8;
            background: #334155;
        }
    </style>
</head>
<body class="text-slate-200 flex justify-center text-left">
    <div id="root" class="w-full max-w-md border-x border-slate-800 bg-slate-950 relative shadow-2xl overflow-hidden text-left"></div>

    <script>
        const Icons = {
            Music: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>`,
            Sparkles: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path></svg>`,
            Key: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.778-7.778Zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3-3.5 3.5Z"></path></svg>`,
            Copy: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>`,
            Check: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>`,
            Pencil: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>`,
            Share: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" x2="12" y1="2" y2="15"></line></svg>`,
            ChevronRight: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>`,
            X: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`,
            Disc: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle></svg>`,
            Refresh: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"></path><polyline points="21 3 21 8 16 8"></polyline></svg>`,
            User: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>`,
            Save: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>`,
            Trash: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>`,
            Heart: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>`,
            Layout: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/></svg>`,
            Library: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>`,
            Tag: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"/><path d="M7 7h.01"/></svg>`,
            Globe: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" x2="22" y1="12" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>`,
            AlertCircle: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>`
        };

        const Icon = ({ name, size = 24, className = "" }) => {
            const svgStr = Icons[name] ? Icons[name]() : '';
            return React.createElement('div', {
                className: className,
                style: { width: size, height: size, display: 'flex', alignItems: 'center', justifyContent: 'center' },
                dangerouslySetInnerHTML: { __html: svgStr.replace('width="24"', `width="${size}"`).replace('height="24"', `height="${size}"`) }
            });
        };
    </script>

    <!-- React ì•± ë©”ì¸ ë¡œì§ -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const genresList = ['K-Pop', 'ë°œë¼ë“œ', 'íŒ', 'í™í•©', 'R&B', 'ë¡', 'EDM', 'ì¬ì¦ˆ', 'Lo-fi', 'ì–´ì¿ ìŠ¤í‹±', 'í´ë˜ì‹', 'ì‹œí‹°íŒ', 'íŠ¸ë¡œíŠ¸', 'êµ­ì•…', 'ë‰´ì—ì´ì§€', 'ì›”ë“œë®¤ì§'];
        const moodsGrid = [
            'ì°¨ë¶„í•œ', 'ìš°ìš¸í•œ', 'ì™¸ë¡œìš´', 'ê·¸ë¦¬ìš´',
            'ëª½í™˜ì ì¸', 'í¬ë§ì°¬', 'ì–´ë‘ìš´', 'ë‚­ë§Œì ì¸',
            'ë‹¹ë‹¹í•œ', 'ìŠ¬í”ˆ', 'ê°ì„±ì ì¸', 'ì¹œë°€í•œ',
            'ë¶„ìœ„ê¸°ìˆëŠ”', 'ì˜í™”ê°™ì€', 'í™œê¸°ì°¬', 'ì‹ ë¹„ë¡œìš´',
            'ì• í‹‹í•œ', 'ë”°ëœ»í•œ', 'ì°¨ê°€ìš´', 'ê±°ì¹œ'
        ];
        const energyOptions = ['ë‚®ìŒ', 'ì¤‘ê°„', 'ë„˜ì¹¨'];
        const instrumentsList = [
            'í”¼ì•„ë…¸', 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', 'ì¼ë ‰ ê¸°íƒ€', 'ì‹ ë””ì‚¬ì´ì €', 'ë°”ì´ì˜¬ë¦°', 'ì²¼ë¡œ', 'ì½˜íŠ¸ë¼ë² ì´ìŠ¤',
            'ìƒ‰ì†Œí°', 'íŠ¸ëŸ¼í«', 'í”Œë£¨íŠ¸', 'í´ë¼ë¦¬ë„·', 'í•˜í”„', 'íŒŒì´í”„ ì˜¤ë¥´ê°„', 'í•˜ëª¨ë‹ˆì¹´', 'ë°´ì¡°', 'ìš°ì¿¨ë ë ˆ',
            'ë“œëŸ¼ ë¨¸ì‹ ', 'ë² ì´ìŠ¤ ê¸°íƒ€', 'í¼ì»¤ì…˜', 'ì ¬ë² ', 'ê°€ì•¼ê¸ˆ', 'ê±°ë¬¸ê³ ', 'í•´ê¸ˆ', 'ì „ê¸° í”¼ì•„ë…¸'
        ];

        // ì—°ì£¼ê³¡ ìŠ¤íƒ€ì¼ 15ì¢…
        const instrumentalSubStyles = [
            { id: 'is_1', label: '1. í”¼ì•„ë…¸ ì†”ë¡œ', genre: 'ë‰´ì—ì´ì§€', moods: ['ì°¨ë¶„í•œ', 'ê°ì„±ì ì¸'], inst: ['í”¼ì•„ë…¸'], bpm: 75 },
            { id: 'is_2', label: '2. ë¡œíŒŒì´ ì¹ ', genre: 'Lo-fi', moods: ['ëª½í™˜ì ì¸', 'ì°¨ë¶„í•œ'], inst: ['ì „ê¸° í”¼ì•„ë…¸'], bpm: 90 },
            { id: 'is_3', label: '3. ì˜¤ì¼€ìŠ¤íŠ¸ë¼', genre: 'í´ë˜ì‹', moods: ['ì˜í™”ê°™ì€', 'ì‹ ë¹„ë¡œìš´'], inst: ['ë°”ì´ì˜¬ë¦°', 'ì²¼ë¡œ'], bpm: 80 },
            { id: 'is_4', label: '4. ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', genre: 'ì–´ì¿ ìŠ¤í‹±', moods: ['ë”°ëœ»í•œ', 'ì¹œë°€í•œ'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], bpm: 95 },
            { id: 'is_5', label: '5. ì¬ì¦ˆ ì¿¼í…Ÿ', genre: 'ì¬ì¦ˆ', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ì°¨ê°€ìš´'], inst: ['ìƒ‰ì†Œí°', 'ì½˜íŠ¸ë¼ë² ì´ìŠ¤'], bpm: 110 },
            { id: 'is_6', label: '6. êµ­ì•… ì•™ìƒë¸”', genre: 'êµ­ì•…', moods: ['ê·¸ë¦¬ìš´', 'ì‹ ë¹„ë¡œìš´'], inst: ['ê°€ì•¼ê¸ˆ', 'í•´ê¸ˆ'], bpm: 85 },
            { id: 'is_7', label: '7. ì•°ë¹„ì–¸íŠ¸', genre: 'ë‰´ì—ì´ì§€', moods: ['ì‹ ë¹„ë¡œìš´', 'ëª½í™˜ì ì¸'], inst: ['ì‹ ë””ì‚¬ì´ì €'], bpm: 60 },
            { id: 'is_8', label: '8. íƒ€ì•… ë¦¬ë“¬', genre: 'ì›”ë“œë®¤ì§', moods: ['ê±°ì¹œ', 'í™œê¸°ì°¬'], inst: ['ì ¬ë² ', 'í¼ì»¤ì…˜'], bpm: 125 },
            { id: 'is_9', label: '9. ì‹ ìŠ¤ì›¨ì´ë¸Œ', genre: 'EDM', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'í™œê¸°ì°¬'], inst: ['ì‹ ë””ì‚¬ì´ì €'], bpm: 120 },
            { id: 'is_10', label: '10. í‘í‚¤ ë² ì´ìŠ¤', genre: 'R&B', moods: ['ë‹¹ë‹¹í•œ', 'í™œê¸°ì°¬'], inst: ['ë² ì´ìŠ¤ ê¸°íƒ€', 'ë“œëŸ¼ ë¨¸ì‹ '], bpm: 115 },
            { id: 'is_11', label: '11. ìŠ¤í˜ë‹ˆì‹œ ê¸°íƒ€', genre: 'ì›”ë“œë®¤ì§', moods: ['ë‚­ë§Œì ì¸', 'ê±°ì¹œ'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], bpm: 105 },
            { id: 'is_12', label: '12. ì±”ë²„ í´ë˜ì‹', genre: 'í´ë˜ì‹', moods: ['ì°¨ë¶„í•œ', 'ì¹œë°€í•œ'], inst: ['ë°”ì´ì˜¬ë¦°', 'í•˜í”„'], bpm: 70 },
            { id: 'is_13', label: '13. ë‹¤í¬ í…Œí¬ë…¸', genre: 'EDM', moods: ['ì–´ë‘ìš´', 'ê±°ì¹œ'], inst: ['ë“œëŸ¼ ë¨¸ì‹ ', 'ì‹ ë””ì‚¬ì´ì €'], bpm: 135 },
            { id: 'is_14', label: '14. ì‹œë„¤ë§ˆí‹± ì„œìŠ¤íœìŠ¤', genre: 'ë°œë¼ë“œ', moods: ['ì‹ ë¹„ë¡œìš´', 'ì˜í™”ê°™ì€'], inst: ['ì²¼ë¡œ', 'ì‹ ë””ì‚¬ì´ì €'], bpm: 65 },
            { id: 'is_15', label: '15. íë§ ëª…ìƒìŒì•…', genre: 'ë‰´ì—ì´ì§€', moods: ['ì°¨ë¶„í•œ', 'í¬ë§ì°¬'], inst: ['í•˜í”„', 'í”¼ì•„ë…¸'], bpm: 50 }
        ];

        const App = () => {
            const [isEntered, setIsEntered] = useState(false);
            const [apiKey, setApiKey] = useState('');
            const [title, setTitle] = useState('');
            const [persona, setPersona] = useState({ name: 'ìƒˆ í”„ë¡œí•„', gender: 'ì—¬ì„±', age: '20ëŒ€', tone: 'ë§‘ê³  ê¹¨ë—í•œ', style: 'ê°ì„±ì ì¸', voiceId: '' });
            const [selectedGenres, setSelectedGenres] = useState(['K-Pop']);
            const [selectedMoods, setSelectedMoods] = useState(['ëª½í™˜ì ì¸']);
            const [energy, setEnergy] = useState('ì¤‘ê°„');
            const [bpm, setBpm] = useState(120);
            const [duration, setDuration] = useState(120);
            const [selectedInstruments, setSelectedInstruments] = useState(['ì‹ ë””ì‚¬ì´ì €']);
            const [instrument, setInstrument] = useState('ì„¤ì • ì•ˆ í•¨');
            const [prompt, setPrompt] = useState('');
            // ê°€ì‚¬ ìˆ˜ì • ë¹„ì„œìš© state ì‚­ì œë¨
            const [showApiModal, setShowApiModal] = useState(false);
            const [showPersonaModal, setShowPersonaModal] = useState(false);
            const [showMoodModal, setShowMoodModal] = useState(false);
            const [showInstModal, setShowInstModal] = useState(false);
            const [showClearConfirm, setShowClearConfirm] = useState(false);
            
            const [toast, setToast] = useState({ show: false, message: '' });
            const [generatingType, setGeneratingType] = useState(null); 
            const [activeThemeTab, setActiveThemeTab] = useState('ì¸ê¸° ì¥ë¥´');
            const [editableStyle, setEditableStyle] = useState('');
            const [editableLyrics, setEditableLyrics] = useState('');
            const [hasResult, setHasResult] = useState(false);
            const [copyStatus, setCopyStatus] = useState({ lyrics: false, style: false });
            const [library, setLibrary] = useState([]);

            const isInstrumental = persona.gender === 'ì—°ì£¼ê³¡ (Instrumental)';

            const themes = [
                { category: 'ì¸ê¸° ì¥ë¥´', items: [
                    { id: 'p_kpop', label: 'ğŸ¤ ëŒ„ìŠ¤ / K-POP', genre: 'K-Pop', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 124 },
                    { id: 'p_rnb', label: 'ğŸ¸ í™í•© / R&B', genre: 'í™í•©', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ê±°ì¹œ'], inst: ['ë“œëŸ¼ ë¨¸ì‹ '], gender: 'ë‚¨ì„±', bpm: 95 },
                    { id: 'p_indie', label: 'ğŸ¹ ì¸ë”” / ì–´ì¿ ìŠ¤í‹±', genre: 'ì–´ì¿ ìŠ¤í‹±', moods: ['ë”°ëœ»í•œ', 'ê·¸ë¦¬ìš´'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], gender: 'ì—¬ì„±', bpm: 85 },
                    { id: 'p_ost', label: 'ğŸ¬ OST ê°ì„±', genre: 'ë°œë¼ë“œ', moods: ['ì˜í™”ê°™ì€', 'ê°ì„±ì ì¸'], inst: ['ë°”ì´ì˜¬ë¦°'], gender: 'ì—¬ì„±', bpm: 75 },
                    { id: 'p_retro', label: 'ğŸ•°ï¸ ëª…ê³¡ / ë ˆíŠ¸ë¡œ', genre: 'ì‹œí‹°íŒ', moods: ['ê·¸ë¦¬ìš´', 'ëª½í™˜ì ì¸'], inst: ['ë² ì´ìŠ¤ ê¸°íƒ€'], gender: 'ì—¬ì„±', bpm: 110 },
                    { id: 'p_pop', label: 'ğŸŒ POP / í•´ì™¸', genre: 'íŒ', moods: ['í¬ë§ì°¬', 'ë‚­ë§Œì ì¸'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 105 },
                    { id: 'p_lofi', label: 'ğŸŒ™ ë¡œíŒŒì´ / Lo-fi', genre: 'Lo-fi', moods: ['ì°¨ë¶„í•œ', 'ë¶„ìœ„ê¸°ìˆëŠ”'], inst: ['ì „ê¸° í”¼ì•„ë…¸'], gender: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 90 },
                    { id: 'p_rock', label: 'ğŸ¸ ë¡ / ì–¼í„°ë„ˆí‹°ë¸Œ', genre: 'ë¡', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 128 }
                ]},
                { category: 'ë°œë¼ë“œ', items: [
                    { id: 'b_bye', label: 'ğŸ’” ì´ë³„Â·ê·¸ë¦¬ì›€', genre: 'ë°œë¼ë“œ', moods: ['ìŠ¬í”ˆ', 'ì™¸ë¡œìš´'], inst: ['í”¼ì•„ë…¸'], gender: 'ì—¬ì„±', bpm: 68 },
                    { id: 'b_love', label: 'ğŸ’• ì‚¬ë‘Â·ì„¤ë ˜', genre: 'ë°œë¼ë“œ', moods: ['ë‚­ë§Œì ì¸', 'í¬ë§ì°¬'], inst: ['í”¼ì•„ë…¸'], gender: 'ë‚¨ë…€ ë“€ì—£', bpm: 76 },
                    { id: 'b_sad', label: 'ğŸŒ§ï¸ ìŠ¬í””Â·ëˆˆë¬¼', genre: 'ë°œë¼ë“œ', moods: ['ìŠ¬í”ˆ', 'ìš°ìš¸í•œ'], inst: ['ì²¼ë¡œ'], gender: 'ì—¬ì„±', bpm: 62 },
                    { id: 'b_heal', label: 'ğŸŒ¿ ìœ„ë¡œÂ·íë§', genre: 'ë°œë¼ë“œ', moods: ['ë”°ëœ»í•œ', 'ì°¨ë¶„í•œ'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 80 }
                ]},
                { category: 'ëŒ„ìŠ¤/ì¼ë ‰', items: [
                    { id: 'd_kpop', label: 'ğŸ¤ K-POP ëŒ„ìŠ¤', genre: 'K-Pop', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 128 },
                    { id: 'd_edm', label: 'ğŸ”¥ EDM í˜ìŠ¤í‹°ë²Œ', genre: 'EDM', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ë‚¨ì„±', bpm: 132 },
                    { id: 'd_hou', label: 'ğŸ§ í•˜ìš°ìŠ¤', genre: 'EDM', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ì‹ ë¹„ë¡œìš´'], inst: ['ë² ì´ìŠ¤ ê¸°íƒ€'], gender: 'ì—¬ì„±', bpm: 124 },
                    { id: 'd_tec', label: 'ğŸ–¤ í…Œí¬ë…¸', genre: 'EDM', moods: ['ì–´ë‘ìš´', 'ê±°ì¹œ'], inst: ['ë“œëŸ¼ ë¨¸ì‹ '], gender: 'ë‚¨ì„±', bpm: 135 },
                    { id: 'd_tra', label: 'ğŸŒŒ íŠ¸ëœìŠ¤', genre: 'EDM', moods: ['ëª½í™˜ì ì¸', 'í™œê¸°ì°¬'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ë‚¨ì„±', bpm: 140 },
                    { id: 'd_pop', label: 'ğŸ•º ëŒ„ìŠ¤ íŒ', genre: 'íŒ', moods: ['í¬ë§ì°¬', 'ë‚­ë§Œì ì¸'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 120 },
                    { id: 'd_electro', label: 'âš¡ ì¼ë ‰íŠ¸ë¡œ íŒ', genre: 'íŒ', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 122 },
                    { id: 'd_disco', label: 'âœ¨ ë””ìŠ¤ì½”/í‘í¬', genre: 'EDM', moods: ['í™œê¸°ì°¬', 'ë”°ëœ»í•œ'], inst: ['ë² ì´ìŠ¤ ê¸°íƒ€'], gender: 'ë‚¨ë…€ ë“€ì—£', bpm: 118 }
                ]},
                { category: 'ì „í†µê°€ìš”', items: [
                    { id: 't_pure', label: 'ğŸ™ï¸ ì •í†µ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', moods: ['ê·¸ë¦¬ìš´', 'ê°ì„±ì ì¸'], inst: ['ìƒ‰ì†Œí°'], gender: 'ì—¬ì„±', bpm: 135 },
                    { id: 't_semi', label: 'ğŸ’ƒ ì„¸ë¯¸ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', moods: ['í™œê¸°ì°¬', 'í¬ë§ì°¬'], inst: ['í”¼ì•„ë…¸'], gender: 'ì—¬ì„±', bpm: 130 },
                    { id: 't_new', label: 'âœ¨ ì‹ ì„¸ëŒ€ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', moods: ['ë‹¹ë‹¹í•œ', 'í™œê¸°ì°¬'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 140 },
                    { id: 't_fus', label: 'ğŸ í“¨ì „ íŠ¸ë¡¯', genre: 'êµ­ì•…', moods: ['ì˜í™”ê°™ì€', 'ê°ì„±ì ì¸'], inst: ['ê°€ì•¼ê¸ˆ'], gender: 'ì—¬ì„±', bpm: 110 },
                    { id: 't_dan', label: 'ğŸ•º ëŒ„ìŠ¤ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ë“œëŸ¼ ë¨¸ì‹ '], gender: 'ë‚¨ì„±', bpm: 142 },
                    { id: 't_bal', label: 'ğŸ’” ë°œë¼ë“œ íŠ¸ë¡¯', genre: 'ë°œë¼ë“œ', moods: ['ìŠ¬í”ˆ', 'ê°ì„±ì ì¸'], inst: ['ë°”ì´ì˜¬ë¦°'], gender: 'ì—¬ì„±', bpm: 70 },
                    { id: 't_soul', label: 'ğŸ· ì†Œìš¸ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ë”°ëœ»í•œ'], inst: ['ìƒ‰ì†Œí°'], gender: 'ë‚¨ì„±', bpm: 128 },
                    { id: 't_folk', label: 'ğŸ‹ í¬í¬ íŠ¸ë¡¯', genre: 'ì–´ì¿ ìŠ¤í‹±', moods: ['ê·¸ë¦¬ìš´', 'ë”°ëœ»í•œ'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], gender: 'ì—¬ì„±', bpm: 120 }
                ]},
                { category: 'ë¡/ì–¼í„°ë„ˆí‹°ë¸Œ', items: [
                    { id: 'r_hard', label: 'ğŸ¤˜ í•˜ë“œ ë¡', genre: 'ë¡', moods: ['ë‹¹ë‹¹í•œ', 'ì–´ë‘ìš´'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 130 },
                    { id: 'r_punk', label: 'âš¡ í‘í¬ ë¡', genre: 'ë¡', moods: ['í™œê¸°ì°¬', 'ê±°ì¹œ'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 160 },
                    { id: 'r_metal', label: 'ğŸ¸ í—¤ë¹„ ë©”íƒˆ', genre: 'ë¡', moods: ['ì–´ë‘ìš´', 'ë‹¹ë‹¹í•œ'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 140 },
                    { id: 'r_indie', label: 'ğŸ¹ ì¸ë”” ë¡', genre: 'ë¡', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ëª½í™˜ì ì¸'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], gender: 'ì—¬ì„±', bpm: 120 },
                    { id: 'r_brit', label: 'ğŸ‡¬ğŸ‡§ ë¸Œë¦¿ íŒ', genre: 'ë¡', moods: ['í¬ë§ì°¬', 'ê·¸ë¦¬ìš´'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 115 },
                    { id: 'r_garage', label: 'ğŸš— ê°€ë¼ì§€ ë¡', genre: 'ë¡', moods: ['ê±°ì¹œ', 'ì–´ë‘ìš´'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 135 },
                    { id: 'r_grunge', label: 'ğŸ§¥ ê·¸ëŸ°ì§€ ë¡', genre: 'ë¡', moods: ['ìš°ìš¸í•œ', 'ê±°ì¹œ'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 100 },
                    { id: 'r_classic', label: 'ğŸ“» í´ë˜ì‹ ë¡', genre: 'ë¡', moods: ['ë‹¹ë‹¹í•œ', 'ë”°ëœ»í•œ'], inst: ['ì¼ë ‰ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 120 }
                ]},
                { category: 'í“¨ì „/ì‹¤í—˜', items: [
                    { id: 'f_acid', label: 'ğŸ· ì• ì‹œë“œ ì¬ì¦ˆ', genre: 'ì¬ì¦ˆ', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ë”°ëœ»í•œ'], inst: ['ìƒ‰ì†Œí°'], gender: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 115 },
                    { id: 'f_synth', label: 'ğŸ¹ ì‹ ìŠ¤ íŒ', genre: 'íŒ', moods: ['ëª½í™˜ì ì¸', 'í¬ë§ì°¬'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 120 },
                    { id: 'f_raga', label: 'ë¼ê°€ ë¸Œë ˆì´í¬', genre: 'ì›”ë“œë®¤ì§', moods: ['ì‹ ë¹„ë¡œìš´', 'ë¶„ìœ„ê¸°ìˆëŠ”'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 130 },
                    { id: 'f_hyphy', label: 'í•˜ì´í”¼ R&B', genre: 'í™í•©', moods: ['í™œê¸°ì°¬', 'ë‹¹ë‹¹í•œ'], inst: ['ë“œëŸ¼ ë¨¸ì‹ '], gender: 'ë‚¨ì„±', bpm: 105 },
                    { id: 'f_alt_rnb', label: 'ì–¼í„°ë„ˆí‹°ë¸Œ R&B', genre: 'R&B', moods: ['ë¶„ìœ„ê¸°ìˆëŠ”', 'ëª½í™˜ì ì¸'], inst: ['ì „ê¸° í”¼ì•„ë…¸'], gender: 'ì—¬ì„±', bpm: 90 },
                    { id: 'f_acoustic_trance', label: 'ì–´ì¿ ìŠ¤í‹± íŠ¸ëœìŠ¤', genre: 'ì–´ì¿ ìŠ¤í‹±', moods: ['ëª½í™˜ì ì¸', 'ì°¨ë¶„í•œ'], inst: ['ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€'], gender: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 110 },
                    { id: 'f_gfunk', label: 'ì§€í‘í¬ EDM', genre: 'í™í•©', moods: ['ë‹¹ë‹¹í•œ', 'ë”°ëœ»í•œ'], inst: ['ë² ì´ìŠ¤ ê¸°íƒ€'], gender: 'ë‚¨ì„±', bpm: 100 },
                    { id: 'f_psych', label: 'ì‚¬ì´í‚¤ë¸ë¦­ í•˜ìš°ìŠ¤', genre: 'EDM', moods: ['ì‹ ë¹„ë¡œìš´', 'ëª½í™˜ì ì¸'], inst: ['ì‹ ë””ì‚¬ì´ì €'], gender: 'ì—¬ì„±', bpm: 124 }
                ]}
            ];

            const entranceImageUrl = "https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?auto=format&fit=crop&q=80&w=1920";

            useEffect(() => {
                const savedData = localStorage.getItem('electoy-studio-config-v14');
                if (savedData) {
                    try {
                        const parsed = JSON.parse(savedData);
                        if (parsed.apiKey) setApiKey(parsed.apiKey);
                        if (parsed.persona) setPersona(parsed.persona);
                        if (parsed.library) setLibrary(parsed.library);
                        if (parsed.selectedInstruments) setSelectedInstruments(parsed.selectedInstruments);
                        if (parsed.selectedMoods) setSelectedMoods(parsed.selectedMoods);
                    } catch (e) {}
                }
            }, []);

            useEffect(() => {
                const configToSave = { apiKey, persona, library, selectedInstruments, selectedMoods };
                localStorage.setItem('electoy-studio-config-v14', JSON.stringify(configToSave));
            }, [apiKey, persona, library, selectedInstruments, selectedMoods]);

            const showToast = (msg) => {
                setToast({ show: true, message: msg });
                setTimeout(() => setToast({ show: false, message: '' }), 3000);
            };

            const toggleInstrument = (inst) => {
                if (selectedInstruments.includes(inst)) {
                    setSelectedInstruments(prev => prev.filter(i => i !== inst));
                } else if (selectedInstruments.length < 5) {
                    setSelectedInstruments(prev => [...prev, inst]);
                } else {
                    showToast("ì•…ê¸°ëŠ” ìµœëŒ€ 5ê°œê¹Œì§€ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
                }
            };

            const toggleMood = (mood) => {
                if (selectedMoods.includes(mood)) {
                    setSelectedMoods(prev => prev.filter(m => m !== mood));
                } else if (selectedMoods.length < 4) {
                    setSelectedMoods(prev => [...prev, mood]);
                } else {
                    showToast("ë¬´ë“œëŠ” ìµœëŒ€ 4ê°œê¹Œì§€ ì„ íƒ ê°€ëŠ¥í•©ë‹ˆë‹¤.");
                }
            };
            
            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            const handleSaveToLibrary = () => {
                if (!editableLyrics || !editableStyle) { showToast("ë¨¼ì € ê³¡ì„ ìƒì„±í•´ ì£¼ì„¸ìš”!"); return; }
                const newProject = { id: Date.now(), title: title || "ë¬´ì œ í”„ë¡œì íŠ¸", lyrics: editableLyrics, style: editableStyle, date: new Date().toLocaleDateString() };
                setLibrary(prev => [newProject, ...prev]);
                showToast("ë³´ê´€í•¨ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
            };

            const deleteLibraryItem = (id, e) => { e.stopPropagation(); setLibrary(prev => prev.filter(item => item.id !== id)); showToast("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."); };
            const clearAllLibrary = () => { setLibrary([]); setShowClearConfirm(false); showToast("ë³´ê´€í•¨ì„ ëª¨ë‘ ë¹„ì› ìŠµë‹ˆë‹¤."); };
            const loadLibraryItem = (item) => { setTitle(item.title); setEditableLyrics(item.lyrics); setEditableStyle(item.style); setHasResult(true); showToast(`'${item.title}' ì‘ì—…ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.`); };

            // ê°€ì‚¬ ìˆ˜ì • ë¹„ì„œ ê¸°ëŠ¥ ì‚­ì œ (handleRefineLyrics ì œê±°ë¨)

            const handleGenerate = async (lang = 'ko') => {
                if (!apiKey) { setShowApiModal(true); return; }
                setGeneratingType(lang); setHasResult(false);
                const styleInstruction = `Generate a long, highly detailed music style prompt in English for Suno AI. Include genres, textures, vocal processing, and audio engineering terms.`;
                const systemPrompt = lang === 'en'
                    ? `Master Producer. Both lyrics and style_prompt in English. JSON: {"style_prompt": "string", "lyrics": "string"}`
                    : `ë§ˆìŠ¤í„° í”„ë¡œë“€ì„œ. ê°€ì‚¬ëŠ” í•œêµ­ì–´, 'style_prompt'ëŠ” ë¬´ì¡°ê±´ ë§¤ìš° ê¸´ ì˜ì–´(English) íƒœê·¸ë¡œë§Œ ì‘ì„±. JSON: {"style_prompt": "string", "lyrics": "string"}`;
                
                const instString = selectedInstruments.join(', ');
                const moodString = selectedMoods.join(', ');
                const userQuery = `ì œëª©: ${title}, ì¥ë¥´: ${selectedGenres.join(',')}, ë¬´ë“œ: ${moodString}, ì—ë„ˆì§€ë ˆë²¨: ${energy}, ì˜ê°: ${prompt}, í˜ë¥´ì†Œë‚˜: ${JSON.stringify(persona)}, ì‚¬ìš© ì•…ê¸°: ${instString}, BPM: ${bpm}`;
                
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] }, generationConfig: { responseMimeType: "application/json" } })
                    });
                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (text) {
                        const parsed = JSON.parse(text);
                        setEditableStyle(parsed.style_prompt); setEditableLyrics(parsed.lyrics); setHasResult(true);
                    }
                } catch (e) { showToast('ìƒì„± ì‹¤íŒ¨'); } finally { setGeneratingType(null); }
            };

            const copyToClipboard = (text, type) => {
                const textArea = document.createElement("textarea"); textArea.value = text; document.body.appendChild(textArea); textArea.select(); document.execCommand('copy'); document.body.removeChild(textArea);
                setCopyStatus(prev => ({ ...prev, [type]: true })); setTimeout(() => setCopyStatus(prev => ({ ...prev, [type]: false })), 2000);
            };

            return (
                <div className="app-container text-slate-200 bg-slate-950 text-left">
                    
                    {/* ì…ì¥ í™”ë©´ */}
                    <div className={`entrance-overlay ${isEntered ? 'hidden' : ''}`} style={{ backgroundImage: `url(${entranceImageUrl})` }}>
                        <div className="relative flex flex-col items-center space-y-12 text-center px-10 animate-in fade-in zoom-in duration-1000">
                            <div className="space-y-4">
                                <h1 className="text-7xl font-black text-white uppercase tracking-tighter drop-shadow-lg text-left">Electoy Studio</h1>
                                <p className="text-slate-200 text-lg font-bold tracking-[0.4em] uppercase opacity-80 text-left">AI Master Music Production</p>
                            </div>
                            <button onClick={() => setIsEntered(true)} className="px-24 py-8 bg-purple-600 rounded-full font-black text-2xl text-white shadow-2xl active:scale-95 transition-all flex items-center gap-5 animate-pulse-glow uppercase tracking-widest text-left">START PRODUCTION</button>
                        </div>
                        <div className="absolute bottom-10 text-white/40 font-black text-xs uppercase tracking-[0.6em] text-left">Electoy Studio â€¢ Master v14.3</div>
                    </div>

                    <header className="shrink-0 bg-slate-900/90 backdrop-blur-md border-b-2 border-slate-800 p-6 flex items-center justify-between sticky top-0 z-50">
                        <div className="flex items-center gap-4 text-left"><div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-lg text-white"><Icon name="Music" size={24} /></div><h1 className="font-black text-2xl uppercase tracking-tight text-white">Electoy Studio</h1></div>
                        <div className="flex items-center gap-3 text-left"><button onClick={() => showToast("ì£¼ì†Œ ë³µì‚¬ë¨!")} className="p-4 rounded-xl bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all shadow-inner text-left"><Icon name="Share" size={24} /></button><button onClick={() => setShowApiModal(true)} className={`p-4 rounded-xl border border-slate-700 ${apiKey ? 'text-green-400 bg-green-900/20' : 'text-slate-400 bg-slate-800'} text-left`}><Icon name="Key" size={24} /></button></div>
                    </header>
                    <main className="flex-1 overflow-y-auto custom-scrollbar p-8 space-y-12 pb-56 text-left">
                        {toast.show && <div className="fixed top-28 left-1/2 -translate-x-1/2 z-[200] px-10 py-5 bg-slate-800 border border-slate-600 text-white font-black text-xl rounded-full shadow-2xl animate-bounce text-center">{toast.message}</div>}
                        
                        <section className="space-y-4 text-left"><label className="text-sm font-bold text-slate-400 uppercase tracking-widest ml-2 text-left">Project Title</label><input type="text" value={title} onChange={(e) => setTitle(e.target.value)} placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”..." className="w-full bg-slate-900 border border-slate-700 rounded-2xl px-8 py-5 text-2xl font-bold outline-none focus:border-slate-500 transition-all text-white text-left" /></section>
                        
                        <section className="space-y-6 text-left">
                            <label className="text-sm font-bold text-slate-400 uppercase ml-2 flex items-center gap-4 text-left"><Icon name="Sparkles" size={20} /> ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹</label>
                            <div className="flex flex-wrap gap-2 text-left">
                                {themes.map(cat => (
                                    <button key={cat.category} onClick={() => setActiveThemeTab(cat.category)} className={`px-5 py-3 text-sm font-bold rounded-lg transition-all ${activeThemeTab === cat.category ? 'active-tab' : 'bg-slate-900 text-slate-400 border border-slate-700 hover:bg-slate-800'}`}>{cat.category}</button>
                                ))}
                            </div>
                            <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 text-left">
                                {themes.find(t => t.category === activeThemeTab)?.items.map(item => (
                                    <button key={item.id} onClick={() => { setSelectedGenres([item.genre]); setSelectedMoods(item.moods); setSelectedInstruments(item.inst); setPersona(p => ({...p, gender: item.gender})); setBpm(item.bpm); showToast(`'${item.label}' ì ìš©!`); }} className="card-container text-base font-bold text-slate-300 hover:border-slate-500 hover:text-white transition-all active:scale-95 text-left leading-tight h-full">{item.label}</button>
                                ))}
                            </div>
                        </section>

                        <section className="card-container space-y-10 text-left">
                            <div className="flex justify-between items-center text-left"><label className="text-xl font-black text-slate-300 uppercase tracking-widest text-left"><Icon name="Key" size={20}/> ìƒì„¸ ì„¤ì •</label><button onClick={() => { const newGender = isInstrumental ? 'ì—¬ì„±' : 'ì—°ì£¼ê³¡ (Instrumental)'; setPersona(prev => ({ ...prev, gender: newGender })); showToast(newGender === 'ì—¬ì„±' ? "ë³´ì»¬ ëª¨ë“œë¡œ ì „í™˜" : "ì—°ì£¼ê³¡ ëª¨ë“œ ON"); }} className={`px-8 py-4 rounded-xl text-lg font-bold transition-all border ${isInstrumental ? 'bg-slate-700 text-white border-slate-500' : 'bg-slate-900 text-slate-500 border-slate-700'}`}>ì—°ì£¼ê³¡ ëª¨ë“œ {isInstrumental ? 'ON' : 'OFF'}</button></div>
                            {isInstrumental && (
                                <div className="grid grid-cols-2 gap-4 pb-4 animate-in zoom-in-95 text-left">
                                    {instrumentalSubStyles.map(s => (
                                        <button key={s.id} onClick={() => { setSelectedGenres([s.genre]); setSelectedMoods(s.moods); setSelectedInstruments(s.inst); setBpm(s.bpm); showToast(`'${s.label}' ì ìš©!`); }} className="p-5 bg-slate-900 border border-slate-700 rounded-2xl text-lg font-bold text-slate-300 text-left hover:border-slate-500 hover:text-white transition-all shadow-lg">{s.label}</button>
                                    ))}
                                </div>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 text-left">
                                <button onClick={() => setShowPersonaModal(true)} className="card-container text-left hover:border-slate-500 active:scale-95 transition-all min-h-[160px]">
                                    <div className="text-xs text-slate-400 font-bold mb-4 uppercase tracking-widest flex items-center gap-2 text-left"><Icon name="User" size={16}/> ë³´ì»¬ í˜ë¥´ì†Œë‚˜</div>
                                    <div className="space-y-2 mb-4 text-left">
                                        <div className="flex flex-wrap gap-2 text-left"><span className="persona-badge text-left">{persona.name}</span><span className="persona-badge text-left">{persona.gender}</span><span className="persona-badge text-left">{persona.age}</span></div>
                                        <div className="text-lg text-slate-200 font-bold leading-snug text-left">{persona.tone} / {persona.style}</div>
                                    </div>
                                </button>
                                <div className="grid grid-cols-2 gap-6 text-left">
                                    <button onClick={() => setShowMoodModal(true)} className="card-container text-left hover:border-slate-500 active:scale-95 transition-all text-left">
                                        <div className="text-xs text-slate-400 font-bold mb-4 uppercase tracking-widest flex items-center gap-2 text-left"><Icon name="Heart" size={16}/> ë¶„ìœ„ê¸°</div>
                                        <div className="flex flex-wrap gap-2 text-left">
                                            {selectedMoods.slice(0, 2).map(m => <span key={m} className="persona-badge text-left">{m}</span>)}
                                            {selectedMoods.length > 2 && <span className="persona-badge text-left">+{selectedMoods.length-2}</span>}
                                        </div>
                                    </button>

                                    <button onClick={() => setShowInstModal(true)} className="card-container text-left hover:border-slate-500 active:scale-95 transition-all text-left">
                                        <div className="text-xs text-slate-400 font-bold mb-4 uppercase tracking-widest flex items-center gap-2 text-left"><Icon name="Layout" size={16}/> ì•…ê¸° êµ¬ì„±</div>
                                        <div className="flex flex-wrap gap-2 text-left">
                                            {selectedInstruments.slice(0, 2).map(i => <span key={i} className="persona-badge text-left">{i}</span>)}
                                            {selectedInstruments.length > 2 && <span className="persona-badge text-left">+{selectedInstruments.length-2}</span>}
                                        </div>
                                    </button>
                                </div>
                            </div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 pt-6 border-t border-slate-800 text-left">
                                <div className="space-y-4 text-left">
                                    <div className="flex justify-between text-sm font-bold text-slate-400 uppercase tracking-widest text-left"><span>BPM (ì†ë„)</span><span className="text-white text-xl font-mono text-left">{bpm}</span></div>
                                    <input type="range" min="40" max="200" step="10" value={bpm} onChange={(e) => setBpm(parseInt(e.target.value))} className="w-full h-2 cursor-pointer rounded-lg appearance-none bg-slate-800 text-left" />
                                </div>
                                <div className="space-y-4 text-left">
                                    <div className="flex justify-between text-sm font-bold text-slate-400 uppercase tracking-widest text-left"><span>ê³¡ ê¸¸ì´ (Duration)</span><span className="text-white text-xl font-mono text-left">{formatTime(duration)}</span></div>
                                    <input type="range" min="30" max="360" step="10" value={duration} onChange={(e) => setDuration(parseInt(e.target.value))} className="w-full h-2 cursor-pointer rounded-lg appearance-none bg-slate-800 text-left" />
                                </div>
                            </div>
                        </section>

                        <section className="space-y-8 text-left"><textarea value={prompt} onChange={(e) => setPrompt(e.target.value)} placeholder="ìŒì•…ì  ì•„ì´ë””ì–´ë¥¼ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”..." className="w-full bg-slate-900 border border-slate-700 rounded-[3rem] p-10 h-80 text-2xl font-bold outline-none focus:border-slate-500 transition-all text-white shadow-inner leading-relaxed text-left" /><div className="grid grid-cols-2 gap-8 text-white text-left">
                            <button onClick={() => handleGenerate('ko')} disabled={generatingType !== null} className="py-8 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-[2.5rem] font-black text-2xl shadow-xl flex items-center justify-center gap-4 active:scale-95 transition-all text-center">
                                {generatingType === 'ko' ? <Icon name="Refresh" className="animate-spin" size={28} /> : <Icon name="Sparkles" size={28} />} ìƒì„±
                            </button>
                            <button onClick={() => handleGenerate('en')} disabled={generatingType !== null} className="py-8 bg-slate-800 hover:bg-slate-700 border border-slate-600 rounded-[2.5rem] font-black text-2xl flex items-center justify-center gap-4 active:scale-95 shadow-xl text-center">
                                {generatingType === 'en' ? <Icon name="Refresh" className="animate-spin" size={28} /> : <Icon name="Globe" size={28} />} ENGLISH
                            </button>
                        </div></section>

                        <section className="pt-24 border-t border-slate-800 space-y-16 text-left">
                            {hasResult && (
                                <div className="space-y-20 animate-in slide-in-from-bottom-10 duration-700 text-left">
                                    <div className="card-container text-left">
                                        <div className="flex justify-between items-center mb-10 text-left">
                                            <span className="text-2xl font-black text-slate-200 uppercase tracking-widest text-left">ìƒì„±ëœ ê²°ê³¼ (Results)</span>
                                            <div className="flex items-center gap-4 text-left">
                                                {/* [ìˆ˜ì •] ì €ì¥ ë²„íŠ¼ì„ ì´ê³³ìœ¼ë¡œ ì´ë™ */}
                                                <button onClick={handleSaveToLibrary} className="px-6 py-4 bg-slate-800 border border-slate-600 rounded-[2rem] shadow-lg active:scale-90 flex items-center gap-3 font-bold text-lg hover:bg-slate-700 text-left"><Icon name="Save" size={24} /> ì €ì¥</button>
                                                <button onClick={() => copyToClipboard(editableLyrics, 'lyrics')} className="p-4 bg-slate-800 border border-slate-600 rounded-[2rem] shadow-lg active:scale-90 hover:bg-slate-700 text-left"><Icon name="Copy" size={28} /></button>
                                            </div>
                                        </div>
                                        <textarea className="editable-area h-[800px] text-left" value={editableLyrics} onChange={(e) => setEditableLyrics(e.target.value)} />
                                        {/* ìˆ˜ì • ë¹„ì„œ UI ì‚­ì œë¨ */}
                                    </div>
                                    <div className="card-container text-left">
                                        <div className="flex justify-between items-center mb-10 text-left"><span className="text-2xl font-black text-slate-200 uppercase tracking-widest text-left">ìŠ¤íƒ€ì¼ íƒœê·¸</span><button onClick={() => copyToClipboard(editableStyle, 'style')} className="p-4 bg-slate-800 border border-slate-600 rounded-[2rem] shadow-lg active:scale-90 hover:bg-slate-700 text-left"><Icon name="Copy" size={28} /></button></div>
                                        <textarea className="editable-area h-64 font-mono text-slate-300 shadow-inner font-bold text-left" value={editableStyle} onChange={(e) => setEditableStyle(e.target.value)} />
                                    </div>
                                </div>
                            )}

                            <section className="space-y-8 pt-20 border-t border-slate-800 text-left">
                                <div className="flex justify-between items-center px-4 text-left">
                                    <div className="flex items-center gap-4 text-slate-500 text-left"><Icon name="Library" size={28} /><h2 className="text-2xl font-black uppercase tracking-widest text-left">My Library</h2></div>
                                    {library.length > 0 && (<button onClick={() => setShowClearConfirm(true)} className="text-xs font-bold text-red-400 hover:text-red-300 border border-red-500/20 px-4 py-2 rounded-lg transition-all text-left">ì „ì²´ ë¹„ìš°ê¸°</button>)}
                                </div>
                                {library.length === 0 ? (<div className="p-20 border border-dashed border-slate-700 rounded-[3rem] text-center text-slate-600 font-bold text-left">ì €ì¥ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤.</div>) : (
                                    <div className="space-y-4 text-left">
                                        {library.map(item => (
                                            <div key={item.id} onClick={() => loadLibraryItem(item)} className="library-item p-8 rounded-[2rem] flex justify-between items-center cursor-pointer group animate-in slide-in-from-left-5 text-left">
                                                <div className="space-y-2 text-left"> <div className="text-xl font-black text-slate-200 group-hover:text-purple-400 transition-all text-left">{item.title}</div> <div className="text-sm text-slate-500 font-bold text-left">{item.date} â€¢ {item.lyrics.substring(0, 30)}...</div> </div>
                                                <button onClick={(e) => deleteLibraryItem(item.id, e)} className="p-4 text-slate-500 hover:text-red-400 transition-all active:scale-90 text-left"><Icon name="Trash" size={24} /></button>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </section>
                        </section>
                    </main>

                    {showClearConfirm && (
                        <div className="fixed inset-0 z-[400] modal-overlay flex items-center justify-center p-6 text-left" onClick={() => setShowClearConfirm(false)}>
                            <div className="confirm-modal animate-in zoom-in-95 text-left" onClick={e => e.stopPropagation()}>
                                <Icon name="AlertCircle" size={48} className="text-red-500 mx-auto mb-4" /><h3 className="text-xl font-black text-white mb-2 text-center">ë³´ê´€í•¨ì„ ë¹„ìš¸ê¹Œìš”?</h3><p className="text-slate-400 text-sm mb-8 text-center">ì €ì¥ëœ ëª¨ë“  ê³¡ì´ ì‚­ì œë˜ë©°<br/>ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
                                <div className="grid grid-cols-2 gap-4"><button onClick={() => setShowClearConfirm(false)} className="py-4 bg-slate-800 rounded-xl font-black text-slate-300">ì·¨ì†Œ</button><button onClick={clearAllLibrary} className="py-4 bg-red-600 rounded-xl font-black text-white">ì „ì²´ ì‚­ì œ</button></div>
                            </div>
                        </div>
                    )}
                    
                    {showApiModal && (
                        <div className="fixed inset-0 z-[300] modal-overlay flex items-center justify-center p-12 text-left" onClick={() => setShowApiModal(false)}>
                            <div className="bg-slate-900 border border-slate-600 w-full max-w-xl rounded-[3rem] p-10 space-y-12 text-left animate-in zoom-in-95 shadow-2xl">
                                <div className="flex justify-between items-center text-left">
                                    <div className="flex items-center gap-4 text-slate-300"><Icon name="Key" size={32} /><h3 className="font-black text-2xl uppercase tracking-widest">API Key Setup</h3></div>
                                    <div className="cursor-pointer text-slate-500 hover:text-white transition-all text-left" onClick={() => setShowApiModal(false)}><Icon name="X" size={48} /></div>
                                </div>
                                <div className="space-y-4 text-left">
                                    <label className="text-[11px] font-black text-slate-500 uppercase ml-2 tracking-[0.3em] text-left">Gemini API Key</label>
                                    <input type="password" placeholder="ì´ê³³ì— API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." value={apiKey} onChange={(e) => setApiKey(e.target.value)} className="w-full bg-slate-800 border border-slate-600 rounded-[1.5rem] p-6 text-2xl text-white outline-none focus:border-slate-500 shadow-inner text-left" autoFocus />
                                </div>
                                <button onClick={() => setShowApiModal(false)} className="w-full bg-slate-700 hover:bg-slate-600 py-8 rounded-[2rem] font-black text-2xl shadow-xl text-center text-white">Save & Close</button>
                            </div>
                        </div>
                    )}
                    
                    {showPersonaModal && (
                        <div className="fixed inset-0 z-[300] modal-overlay flex items-center justify-center p-6 text-left" onClick={() => setShowPersonaModal(false)}>
                            <div className="bg-slate-900 border border-slate-600 w-full max-w-md max-h-[90vh] overflow-y-auto rounded-[3rem] p-8 space-y-8 animate-in zoom-in-95 custom-scrollbar shadow-2xl text-left" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center border-b border-slate-700 pb-4 text-left">
                                    <div className="flex items-center gap-3 text-slate-300"><Icon name="User" size={24} /><h3 className="font-black text-xl uppercase tracking-widest text-left">Vocal Persona</h3></div>
                                    <div className="cursor-pointer text-slate-500 hover:text-white transition-all text-left" onClick={() => setShowPersonaModal(false)}><Icon name="X" size={32} /></div>
                                </div>
                                <div className="bg-slate-950/80 border border-slate-700 rounded-2xl p-5 space-y-3 text-left">
                                    <div className="flex items-center gap-2 text-[10px] text-slate-500 font-black uppercase tracking-widest text-left"><Icon name="Save" size={12} /> í˜„ì¬ ê¸°ì–µëœ í”„ë¡œí•„</div>
                                    <div className="flex flex-wrap gap-2 text-left"><span className="persona-badge text-left">{persona.name}</span><span className="persona-badge text-left">{persona.gender}</span><span className="persona-badge text-left">{persona.age}</span></div>
                                </div>
                                <div className="space-y-6 text-left">
                                    <div className="space-y-2 text-left">
                                        <label className="text-[11px] font-black text-slate-500 uppercase ml-1 tracking-widest text-left flex items-center gap-2 text-left"><Icon name="Tag" size={12}/> í˜ë¥´ì†Œë‚˜ ì´ë¦„</label>
                                        <input type="text" value={persona.name} onChange={(e) => setPersona(prev => ({ ...prev, name: e.target.value }))} placeholder="ì˜ˆ: ë©”ì¸ ë³´ì»¬" className="w-full bg-slate-800 border border-slate-600 rounded-xl p-4 text-base font-bold text-white outline-none focus:border-slate-500 shadow-inner text-left" />
                                    </div>
                                    {[{ key: 'gender', label: 'ë³´ì»¬ íƒ€ì…', opts: ['ì—¬ì„±', 'ë‚¨ì„±', 'ë‚¨ë…€ ë“€ì—£', 'ì¤‘ì„±ì ', 'í•©ì°½ë‹¨', 'ì—°ì£¼ê³¡ (Instrumental)'] }, { key: 'age', label: 'ì—°ë ¹ëŒ€', opts: ['10ëŒ€', '20ëŒ€', '30ëŒ€', 'ì¤‘í›„í•œ'] }, { key: 'tone', label: 'ëª©ì†Œë¦¬ í†¤', opts: ['ë§‘ê³  ê¹¨ë—í•œ', 'í—ˆìŠ¤í‚¤í•œ', 'íŒŒì›Œí’€í•œ', 'ê°ë¯¸ë¡œìš´', 'ë‚ ì¹´ë¡œìš´'] }, { key: 'style', label: 'ì°½ë²•', opts: ['ê°ì„±ì ì¸', 'ê¸°êµìˆëŠ”', 'ë‹´ë°±í•œ', 'íëŠë¼ëŠ”', 'ì ˆì œëœ'] }].map(item => (
                                        <div key={item.key} className="space-y-2 text-left">
                                            <label className="text-[11px] font-black text-slate-500 uppercase ml-1 tracking-widest text-left">{item.label}</label>
                                            <select value={persona[item.key]} onChange={(e) => setPersona(prev => ({ ...prev, [item.key]: e.target.value }))} className="w-full bg-slate-800 border border-slate-600 rounded-xl p-4 text-base font-bold text-white outline-none focus:border-slate-500 appearance-none shadow-inner text-left">{item.opts.map(o => <option key={o} value={o}>{o}</option>)}</select>
                                        </div>
                                    ))}
                                </div>
                                <button onClick={() => setShowPersonaModal(false)} className="w-full bg-purple-600 hover:bg-purple-500 py-5 rounded-2xl font-black text-lg shadow-xl text-center flex items-center justify-center gap-3 text-left"> <Icon name="Check" size={20} /> ì €ì¥ ë° ì ìš© </button>
                            </div>
                        </div>
                    )}
                    
                    {showMoodModal && (
                        <div className="fixed inset-0 z-[400] modal-overlay flex items-center justify-center p-6 text-left" onClick={() => setShowMoodModal(false)}>
                            <div className="bg-[#0f172a] border border-slate-600 w-full max-w-md max-h-[90vh] overflow-y-auto rounded-[2rem] p-8 space-y-10 animate-in zoom-in-95 custom-scrollbar shadow-2xl text-left" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center text-left">
                                    <h3 className="font-black text-2xl text-white text-left">ë¶„ìœ„ê¸°</h3>
                                    <div className="cursor-pointer text-slate-500 hover:text-white transition-all text-left" onClick={() => setShowMoodModal(false)}><Icon name="X" size={32} /></div>
                                </div>
                                <div className="grid grid-cols-4 gap-2 text-left"> {moodsGrid.map(mood => ( <button key={mood} onClick={() => toggleMood(mood)} className={`mood-chip ${selectedMoods.includes(mood) ? 'selected' : ''} text-left`}> {mood} </button> ))} </div>
                                <div className="space-y-6 pt-4 text-left">
                                    <h3 className="font-black text-2xl text-white text-left">ì—ë„ˆì§€</h3>
                                    <div className="grid grid-cols-3 gap-3 text-left"> {energyOptions.map(opt => ( <button key={opt} onClick={() => setEnergy(opt)} className={`mood-chip !py-4 ${energy === opt ? 'selected' : ''} text-left`}> {opt} </button> ))} </div>
                                </div>
                                <button onClick={() => setShowMoodModal(false)} className="w-full bg-blue-600 hover:bg-blue-500 py-6 rounded-2xl font-black text-xl shadow-xl active:scale-95 transition-all text-white text-center text-left"> ì„ íƒ ì™„ë£Œ </button>
                            </div>
                        </div>
                    )}

                    {showInstModal && (
                        <div className="fixed inset-0 z-[400] modal-overlay flex items-center justify-center p-6 text-left" onClick={() => setShowInstModal(false)}>
                            <div className="bg-[#0f172a] border border-slate-600 w-full max-w-md max-h-[90vh] overflow-y-auto rounded-[2rem] p-8 space-y-10 animate-in zoom-in-95 custom-scrollbar shadow-2xl text-left" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center text-left">
                                    <div className="flex items-center gap-3 text-pink-400 text-left"> <Icon name="Layout" size={24} /> <h3 className="font-black text-2xl text-white text-left">ì•…ê¸° êµ¬ì„±</h3> </div>
                                    <div className="cursor-pointer text-slate-500 hover:text-white transition-all text-left" onClick={() => setShowInstModal(false)}><Icon name="X" size={32} /></div>
                                </div>
                                <div className="space-y-4 text-left">
                                    <div className="flex justify-between items-center text-left">
                                        <span className="text-slate-500 text-xs font-black uppercase tracking-widest text-left">ì „ì²´ ì•…ê¸° ë¦¬ìŠ¤íŠ¸</span>
                                        <span className="text-pink-400 text-xs font-black text-left">{selectedInstruments.length} / 5</span>
                                    </div>
                                    <div className="grid grid-cols-2 gap-2 text-left">
                                        {instrumentsList.map(inst => (
                                            <button key={inst} onClick={() => toggleInstrument(inst)} className={`inst-chip ${selectedInstruments.includes(inst) ? 'selected' : ''} text-left`}> {inst} </button>
                                        ))}
                                    </div>
                                </div>
                                <button onClick={() => setShowInstModal(false)} className="w-full bg-pink-600 hover:bg-pink-500 py-6 rounded-2xl font-black text-xl shadow-xl active:scale-95 transition-all text-white text-center"> ì„ íƒ ì™„ë£Œ </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(React.createElement(App));
    </script>
</body>
</html>