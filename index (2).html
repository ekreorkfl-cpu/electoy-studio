<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Electoy Studio - AI ÎÆ§ÏßÅ Ïä§ÌäúÎîîÏò§</title>
    <!-- ÌïÑÏàò ÎùºÏù¥Î∏åÎü¨Î¶¨: React, ReactDOM, Babel, Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Pretendard", sans-serif;
        -webkit-tap-highlight-color: transparent;
        overflow: hidden;
        height: 100vh;
        background-color: #020617;
      }
      .app-container {
        height: 100vh;
        display: flex;
        flex-direction: column;
      }
      /* ÏãúÏù∏ÏÑ± Ï¢ãÏùÄ Ïª§Ïä§ÌÖÄ Ïä§ÌÅ¨Î°§Î∞î */
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: transparent;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #334155;
        border-radius: 10px;
        border: 2px solid #020617;
      }

      /* ÏÑ∏Î†®Îêú Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º */
      @keyframes rotate-slow {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      .animate-rotate-slow {
        animation: rotate-slow 25s linear infinite;
      }
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .animate-float {
        animation: float 5s ease-in-out infinite;
      }
      @keyframes star-blink {
        0%,
        100% {
          opacity: 0.2;
        }
        50% {
          opacity: 0.8;
        }
      }
      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: star-blink var(--duration) ease-in-out infinite;
      }
      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 15px rgba(168, 85, 247, 0.3);
        }
        50% {
          box-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
        }
      }
      .animate-pulse-glow {
        animation: pulse-glow 4s infinite;
      }

      /* Î†àÏù¥ÏïÑÏõÉ Ïä§ÌÉÄÏùº */
      .active-tab {
        background: #a855f7;
        color: white !important;
        border-radius: 0.6rem;
        box-shadow: 0 0 15px rgba(168, 85, 247, 0.3);
        border: none !important;
      }
      .modal-overlay {
        background: rgba(0, 0, 0, 0.96);
        backdrop-filter: blur(15px);
        z-index: 100;
      }

      .editable-area {
        width: 100%;
        background: rgba(15, 23, 42, 0.98);
        border: 2px solid #334155;
        border-radius: 1.5rem;
        padding: 1.2rem;
        color: #f8fafc;
        font-size: 1.1rem;
        line-height: 1.7;
        outline: none;
        resize: none;
        font-weight: 500;
      }
      .revision-input {
        background: rgba(30, 41, 59, 0.8);
        border: 2px dashed #475569;
        border-radius: 1rem;
        padding: 1rem;
        color: #e2e8f0;
        width: 100%;
        font-size: 1rem;
        outline: none;
      }
      select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        background-size: 1.2em;
      }
      input[type="range"] {
        accent-color: #a855f7;
      }
    </style>
  </head>
  <body class="text-slate-100 flex justify-center text-left text-left">
    <div
      id="root"
      class="w-full max-w-md border-x border-slate-900 bg-slate-950 relative shadow-2xl overflow-hidden text-left"
    ></div>

    <script>
      // ÏïÑÏù¥ÏΩò Î¶¨ÏÜåÏä§ ÏãúÏä§ÌÖú
      const Icons = {
        Music: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>`,
        Sparkles: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"></path></svg>`,
        Key: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.778-7.778Zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3-3.5 3.5Z"></path></svg>`,
        Copy: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>`,
        Check: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>`,
        Pencil: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>`,
        Share: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" x2="12" y1="2" y2="15"></line></svg>`,
        ChevronRight: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>`,
        X: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`,
        Terminal: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" x2="20" y1="19" y2="19"></line></svg>`,
        Disc: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle></svg>`,
        Mic: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line></svg>`,
        User: () =>
          `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>`,
      };

      const Icon = ({ name, size = 24, className = "" }) => {
        const svgStr = Icons[name] ? Icons[name]() : "";
        return React.createElement("div", {
          className: className,
          style: {
            width: size,
            height: size,
            display: "flex",
            alignItems: "center",
            justifyContent: "center",
          },
          dangerouslySetInnerHTML: {
            __html: svgStr
              .replace('width="24"', `width="${size}"`)
              .replace('height="24"', `height="${size}"`),
          },
        });
      };
    </script>

    <!-- React Ïï± Î©îÏù∏ Î°úÏßÅ -->
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const genresList = [
        "K-Pop",
        "Î∞úÎùºÎìú",
        "Ìåù",
        "ÌûôÌï©",
        "R&B",
        "Î°ù",
        "EDM",
        "Ïû¨Ï¶à",
        "Lo-fi",
        "Ïñ¥Ïø†Ïä§Ìã±",
        "ÌÅ¥ÎûòÏãù",
        "ÏãúÌã∞Ìåù",
        "Ìä∏Î°úÌä∏",
        "Íµ≠ÏïÖ",
        "Îâ¥ÏóêÏù¥ÏßÄ",
        "ÏõîÎìúÎÆ§ÏßÅ",
      ];
      const moodsList = [
        "ÌñâÎ≥µÌïú",
        "Ïä¨Ìîà",
        "ÌôúÍ∏∞Ï∞¨",
        "Ï∞®Î∂ÑÌïú",
        "Ïñ¥ÎëêÏö¥",
        "Î™ΩÌôòÏ†ÅÏù∏",
        "ÏõÖÏû•Ìïú",
        "Í∑∏Î¶¨Ïö¥",
        "ÏÑ∏Î†®Îêú",
        "ÏÑ§Î†àÎäî",
        "ÏúÑÎ°úÍ∞ÄÎêòÎäî",
        "ÏÑπÏãúÌïú",
        "Ìé∏ÏïàÌïú",
        "Ïö∞ÏïÑÌïú",
      ];
      const instrumentsList = [
        "ÏÑ§Ï†ï Ïïà Ìï®",
        "ÌîºÏïÑÎÖ∏",
        "Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
        "ÏùºÎ†â Í∏∞ÌÉÄ",
        "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
        "Î∞îÏù¥Ïò¨Î¶∞",
        "Ï≤ºÎ°ú",
        "ÏÉâÏÜåÌè∞",
        "Ìä∏ÎüºÌé´",
        "ÌïòÌîÑ",
        "ÎìúÎüº Î®∏Ïã†",
        "Î≤†Ïù¥Ïä§ Í∏∞ÌÉÄ",
        "Í∞ÄÏïºÍ∏à",
        "ÎìúÎüºÏÑ∏Ìä∏",
        "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
      ];
      const vocalOptions = [
        "Ïó¨ÏÑ± Î≥¥Ïª¨",
        "ÎÇ®ÏÑ± Î≥¥Ïª¨",
        "ÎÇ®ÎÖÄ ÎìÄÏó£",
        "Ìï©Ï∞ΩÎã®",
        "Ïó∞Ï£ºÍ≥° (Instrumental)",
      ];

      const App = () => {
        const [isEntered, setIsEntered] = useState(false);
        const [apiKey, setApiKey] = useState("");
        const [title, setTitle] = useState("");
        const [persona, setPersona] = useState({
          gender: "Ïó¨ÏÑ±",
          age: "20ÎåÄ",
          tone: "ÎßëÍ≥† Íπ®ÎÅóÌïú",
          style: "Í∞êÏÑ±Ï†ÅÏù∏",
          voiceId: "",
        });
        const [selectedGenres, setSelectedGenres] = useState(["K-Pop"]);
        const [selectedMoods, setSelectedMoods] = useState(["ÌôúÍ∏∞Ï∞¨"]);
        const [bpm, setBpm] = useState(120);
        const [duration, setDuration] = useState(120);
        const [vocalType, setVocalType] = useState("Ïó¨ÏÑ± Î≥¥Ïª¨");
        const [instrument, setInstrument] = useState("ÏÑ§Ï†ï Ïïà Ìï®");

        const [prompt, setPrompt] = useState("");
        const [revisionPrompt, setRevisionPrompt] = useState("");
        const [showApiModal, setShowApiModal] = useState(false);
        const [showPersonaModal, setShowPersonaModal] = useState(false);
        const [toast, setToast] = useState({ show: false, message: "" });
        const [isGenerating, setIsGenerating] = useState(false);
        const [activeThemeTab, setActiveThemeTab] = useState("Ïù∏Í∏∞ Ïû•Î•¥");
        const [editableStyle, setEditableStyle] = useState("");
        const [editableLyrics, setEditableLyrics] = useState("");
        const [hasResult, setHasResult] = useState(false);
        const [copyStatus, setCopyStatus] = useState({
          lyrics: false,
          style: false,
        });

        // Ïä§ÌÉÄÏùº ÌîÑÎ¶¨ÏÖã Îç∞Ïù¥ÌÑ∞
        const themes = [
          {
            category: "Ïù∏Í∏∞ Ïû•Î•¥",
            items: [
              {
                id: "p_kpop",
                label: "üé§ ÎåÑÏä§ / K-POP",
                genre: "K-Pop",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 124,
              },
              {
                id: "p_rnb",
                label: "üé∏ ÌûôÌï© / R&B",
                genre: "ÌûôÌï©",
                mood: "ÏÑ∏Î†®Îêú",
                inst: "ÎìúÎüº Î®∏Ïã†",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 95,
              },
              {
                id: "p_indie",
                label: "üéπ Ïù∏Îîî / Ïñ¥Ïø†Ïä§Ìã±",
                genre: "Ïñ¥Ïø†Ïä§Ìã±",
                mood: "Ï∞®Î∂ÑÌïú",
                inst: "Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 85,
              },
              {
                id: "p_ost",
                label: "üé¨ OST",
                genre: "Î∞úÎùºÎìú",
                mood: "ÏõÖÏû•Ìïú",
                inst: "Î∞îÏù¥Ïò¨Î¶∞",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 75,
              },
              {
                id: "p_retro",
                label: "üï∞Ô∏è Î™ÖÍ≥° / Î†àÌä∏Î°ú",
                genre: "ÏãúÌã∞Ìåù",
                mood: "Í∑∏Î¶¨Ïö¥",
                inst: "Î≤†Ïù¥Ïä§ Í∏∞ÌÉÄ",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 110,
              },
              {
                id: "p_pop",
                label: "üåç POP / Ìï¥Ïô∏",
                genre: "Ìåù",
                mood: "ÌñâÎ≥µÌïú",
                inst: "ÏùºÎ†â Í∏∞ÌÉÄ",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 105,
              },
              {
                id: "p_lofi",
                label: "üåô Î°úÌååÏù¥ / Lo-fi",
                genre: "Lo-fi",
                mood: "Ï∞®Î∂ÑÌïú",
                inst: "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
                vocal: "Ïó∞Ï£ºÍ≥° (Instrumental)",
                bpm: 90,
              },
              {
                id: "p_rock",
                label: "üé∏ Î°ù / ÏñºÌÑ∞ÎÑàÌã∞Î∏å",
                genre: "Î°ù",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "ÏùºÎ†â Í∏∞ÌÉÄ",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 120,
              },
            ],
          },
          {
            category: "Î∞úÎùºÎìú",
            items: [
              {
                id: "b_bye",
                label: "üíî Ïù¥Î≥Ñ¬∑Í∑∏Î¶¨ÏõÄ",
                genre: "Î∞úÎùºÎìú",
                mood: "Ïä¨Ìîà",
                inst: "ÌîºÏïÑÎÖ∏",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 68,
              },
              {
                id: "b_love",
                label: "üíï ÏÇ¨Îûë¬∑ÏÑ§Î†ò",
                genre: "Î∞úÎùºÎìú",
                mood: "ÏÑ§Î†àÎäî",
                inst: "ÌîºÏïÑÎÖ∏",
                vocal: "ÎÇ®ÎÖÄ ÎìÄÏó£",
                bpm: 76,
              },
              {
                id: "b_sad_tear",
                label: "üåßÔ∏è Ïä¨Ìîî¬∑ÎààÎ¨º",
                genre: "Î∞úÎùºÎìú",
                mood: "Ïä¨Ìîà",
                inst: "Ï≤ºÎ°ú",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 62,
              },
              {
                id: "b_heal",
                label: "üåø ÏúÑÎ°ú¬∑ÌûêÎßÅ",
                genre: "Î∞úÎùºÎìú",
                mood: "ÏúÑÎ°úÍ∞ÄÎêòÎäî",
                inst: "Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 80,
              },
              {
                id: "b_night",
                label: "üåô Î∞§ Í∞êÏÑ±",
                genre: "Î∞úÎùºÎìú",
                mood: "Î™ΩÌôòÏ†ÅÏù∏",
                inst: "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 70,
              },
              {
                id: "b_ost_emo",
                label: "üé¨ OST Í∞êÏÑ±",
                genre: "Î∞úÎùºÎìú",
                mood: "ÏõÖÏû•Ìïú",
                inst: "Î∞îÏù¥Ïò¨Î¶∞",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 74,
              },
              {
                id: "b_high",
                label: "üî• Í≥†Ïùå¬∑Ìè≠Î∞ú",
                genre: "Î∞úÎùºÎìú",
                mood: "ÏõÖÏû•Ìïú",
                inst: "ÏùºÎ†â Í∏∞ÌÉÄ",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 72,
              },
              {
                id: "b_aco",
                label: "üé∏ Ïñ¥Ïø†Ïä§Ìã±¬∑Í∞êÏÑ±",
                genre: "Ïñ¥Ïø†Ïä§Ìã±",
                mood: "Ï∞®Î∂ÑÌïú",
                inst: "Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 82,
              },
            ],
          },
          {
            category: "ÎåÑÏä§/ÏùºÎ†â",
            items: [
              {
                id: "d_kpop",
                label: "üé§ K-POP ÎåÑÏä§",
                genre: "K-Pop",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 128,
              },
              {
                id: "d_edm",
                label: "üî• EDM / ÌéòÏä§Ìã∞Î≤å",
                genre: "EDM",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 132,
              },
              {
                id: "d_dance_pop",
                label: "üï∫ ÎåÑÏä§ Ìåù",
                genre: "Ìåù",
                mood: "ÌñâÎ≥µÌïú",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 118,
              },
              {
                id: "d_hou",
                label: "üéß ÌïòÏö∞Ïä§",
                genre: "EDM",
                mood: "ÏÑ∏Î†®Îêú",
                inst: "Î≤†Ïù¥Ïä§ Í∏∞ÌÉÄ",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 124,
              },
              {
                id: "d_elp",
                label: "‚ö° ÏùºÎ†âÌä∏Î°ú Ìåù",
                genre: "Ìåù",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "ÎìúÎüº Î®∏Ïã†",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 120,
              },
              {
                id: "d_chi",
                label: "üåô Ïπ† ÏùºÎ†â / Î°úÌååÏù¥",
                genre: "Lo-fi",
                mood: "Î™ΩÌôòÏ†ÅÏù∏",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 95,
              },
              {
                id: "d_tec",
                label: "üñ§ ÌÖåÌÅ¨ÎÖ∏",
                genre: "EDM",
                mood: "Ïñ¥ÎëêÏö¥",
                inst: "ÎìúÎüº Î®∏Ïã†",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 135,
              },
              {
                id: "d_tra",
                label: "üåå Ìä∏ÎûúÏä§",
                genre: "EDM",
                mood: "Î™ΩÌôòÏ†ÅÏù∏",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 140,
              },
            ],
          },
          {
            category: "Ï†ÑÌÜµÍ∞ÄÏöî",
            items: [
              {
                id: "t_pure",
                label: "üéôÔ∏è Ï†ïÌÜµ Ìä∏Î°Ø",
                genre: "Ìä∏Î°úÌä∏",
                mood: "Í∑∏Î¶¨Ïö¥",
                inst: "ÏÉâÏÜåÌè∞",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 135,
              },
              {
                id: "t_semi",
                label: "üíÉ ÏÑ∏ÎØ∏ Ìä∏Î°Ø",
                genre: "Ìä∏Î°úÌä∏",
                mood: "ÌñâÎ≥µÌïú",
                inst: "ÌîºÏïÑÎÖ∏",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 130,
              },
              {
                id: "t_new",
                label: "‚ú® Ïã†ÏÑ∏ÎåÄ Ìä∏Î°Ø",
                genre: "Ìä∏Î°úÌä∏",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 140,
              },
              {
                id: "t_fus",
                label: "üéé Ìì®Ï†Ñ Ìä∏Î°Ø",
                genre: "Íµ≠ÏïÖ",
                mood: "ÏõÖÏû•Ìïú",
                inst: "Í∞ÄÏïºÍ∏à",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 110,
              },
            ],
          },
          {
            category: "Ìì®Ï†Ñ/Ïã§Ìóò",
            items: [
              {
                id: "f_raga",
                label: "ÎùºÍ∞Ä Ïï†ÏãúÎìú Î∏åÎ†àÏù¥ÌÅ¨",
                genre: "ÏõîÎìúÎÆ§ÏßÅ",
                mood: "Î™ΩÌôòÏ†ÅÏù∏",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "Ïó∞Ï£ºÍ≥° (Instrumental)",
                bpm: 130,
              },
              {
                id: "f_alt_rnb",
                label: "ÏñºÌÑ∞ÎÑàÌã∞Î∏å R&B",
                genre: "R&B",
                mood: "ÏÑ∏Î†®Îêú",
                inst: "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 90,
              },
              {
                id: "f_acid",
                label: "Ïï†ÏãúÎìú ÌÖåÌÅ¨ÎÖ∏ Ïû¨Ï¶à",
                genre: "Ïû¨Ï¶à",
                mood: "Í∞ïÎ†¨Ìïú",
                inst: "ÎìúÎüº Î®∏Ïã†",
                vocal: "Ïó∞Ï£ºÍ≥° (Instrumental)",
                bpm: 130,
              },
              {
                id: "f_psych",
                label: "ÏÇ¨Ïù¥ÌÇ§Îç∏Î¶≠ ÌïòÏö∞Ïä§",
                genre: "EDM",
                mood: "Î™ΩÌôòÏ†ÅÏù∏",
                inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
                vocal: "Ïó¨ÏÑ± Î≥¥Ïª¨",
                bpm: 124,
              },
              {
                id: "f_hyphy",
                label: "ÌïòÏù¥Ìîº R&B",
                genre: "ÌûôÌï©",
                mood: "ÌôúÍ∏∞Ï∞¨",
                inst: "ÎìúÎüº Î®∏Ïã†",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 105,
              },
              {
                id: "f_aco_trance",
                label: "Ïñ¥Ïø†Ïä§Ìã± Ìä∏ÎûúÏä§",
                genre: "Ïñ¥Ïø†Ïä§Ìã±",
                mood: "Î™ΩÌôòÏ†ÅÏù∏",
                inst: "Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
                vocal: "Ïó∞Ï£ºÍ≥° (Instrumental)",
                bpm: 110,
              },
              {
                id: "f_gfunk",
                label: "G-ÌéëÌÅ¨ EDM",
                genre: "ÌûôÌï©",
                mood: "ÏÑ∏Î†®Îêú",
                inst: "Î≤†Ïù¥Ïä§ Í∏∞ÌÉÄ",
                vocal: "ÎÇ®ÏÑ± Î≥¥Ïª¨",
                bpm: 100,
              },
              {
                id: "f_synth_pop",
                label: "Î°úÌååÏù¥ Ïã†Ïä§Ìåù",
                genre: "Lo-fi",
                mood: "Ï∞®Î∂ÑÌïú",
                inst: "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
                vocal: "ÎÇ®ÎÖÄ ÎìÄÏó£",
                bpm: 90,
              },
            ],
          },
        ];

        const instrumentalSubStyles = [
          {
            id: "is_1",
            label: "1. ÌîºÏïÑÎÖ∏ ÏÜîÎ°ú",
            genre: "Îâ¥ÏóêÏù¥ÏßÄ",
            mood: "Ï∞®Î∂ÑÌïú",
            inst: "ÌîºÏïÑÎÖ∏",
            bpm: 70,
          },
          {
            id: "is_2",
            label: "2. Î°úÌååÏù¥ / Ïπ†",
            genre: "Lo-fi",
            mood: "Î™ΩÌôòÏ†ÅÏù∏",
            inst: "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
            bpm: 90,
          },
          {
            id: "is_3",
            label: "3. Ïä§Ìä∏ÎßÅ ÌÅ¥ÎûòÏãù",
            genre: "ÌÅ¥ÎûòÏãù",
            mood: "ÏõÖÏû•Ìïú",
            inst: "Î∞îÏù¥Ïò¨Î¶∞",
            bpm: 80,
          },
          {
            id: "is_4",
            label: "4. Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
            genre: "Ïñ¥Ïø†Ïä§Ìã±",
            mood: "Í∑∏Î¶¨Ïö¥",
            inst: "Ïñ¥Ïø†Ïä§Ìã± Í∏∞ÌÉÄ",
            bpm: 90,
          },
          {
            id: "is_5",
            label: "5. R&B Ïó∞Ï£º",
            genre: "R&B",
            mood: "ÏÑ∏Î†®Îêú",
            inst: "Ï†ÑÍ∏∞ ÌîºÏïÑÎÖ∏",
            bpm: 95,
          },
          {
            id: "is_6",
            label: "6. ÌûêÎßÅ Î™ÖÏÉÅ",
            genre: "Îâ¥ÏóêÏù¥ÏßÄ",
            mood: "ÏúÑÎ°úÍ∞ÄÎêòÎäî",
            inst: "ÌïòÌîÑ",
            bpm: 50,
          },
          {
            id: "is_7",
            label: "7. ÏùºÎ†â Ïó∞Ï£º",
            genre: "EDM",
            mood: "ÏÑ∏Î†®Îêú",
            inst: "Ïã†ÎîîÏÇ¨Ïù¥Ï†Ä",
            bpm: 125,
          },
          {
            id: "is_8",
            label: "8. ÌçºÏª§ÏÖò Î¶¨Îì¨",
            genre: "ÏõîÎìúÎÆ§ÏßÅ",
            mood: "ÌôúÍ∏∞Ï∞¨",
            inst: "ÎìúÎüº Î®∏Ïã†",
            bpm: 125,
          },
          {
            id: "is_9",
            label: "9. Ïû¨Ï¶à Ïó∞Ï£º",
            genre: "Ïû¨Ï¶à",
            mood: "ÏÑ∏Î†®Îêú",
            inst: "Ìä∏ÎüºÌé´",
            bpm: 105,
          },
          {
            id: "is_10",
            label: "10. ÏõîÎìúÎÆ§ÏßÅ",
            genre: "ÏõîÎìúÎÆ§ÏßÅ",
            mood: "Î™ΩÌôòÏ†ÅÏù∏",
            inst: "Í∞ÄÏïºÍ∏à",
            bpm: 95,
          },
          {
            id: "is_11",
            label: "11. ÏÉâÏÜåÌè∞ ÏúàÎìú",
            genre: "Ïû¨Ï¶à",
            mood: "ÏÑπÏãúÌïú",
            inst: "ÏÉâÏÜåÌè∞",
            bpm: 80,
          },
          {
            id: "is_12",
            label: "12. Îâ¥ÏóêÏù¥ÏßÄ",
            genre: "Îâ¥ÏóêÏù¥ÏßÄ",
            mood: "Î™ΩÌôòÏ†ÅÏù∏",
            inst: "ÌîºÏïÑÎÖ∏",
            bpm: 75,
          },
        ];

        const isInstrumental = vocalType.includes("Ïó∞Ï£ºÍ≥°");

        useEffect(() => {
          const savedData = localStorage.getItem(
            "electoy-studio-config-master"
          );
          if (savedData) {
            try {
              const parsed = JSON.parse(savedData);
              if (parsed.apiKey) setApiKey(parsed.apiKey);
            } catch (e) {}
          }
        }, []);

        useEffect(() => {
          localStorage.setItem(
            "electoy-studio-config-master",
            JSON.stringify({ apiKey })
          );
        }, [apiKey]);

        const showToast = (msg) => {
          setToast({ show: true, message: msg });
          setTimeout(() => setToast({ show: false, message: "" }), 3000);
        };

        const handleRefineLyrics = async () => {
          if (!apiKey) {
            setShowApiModal(true);
            return;
          }
          setIsGenerating(true);
          const systemPrompt = `Ï†ÑÎ¨∏ ÏûëÏÇ¨Í∞Ä. JSON ÏùëÎãµ: {"lyrics": "string"}`;
          try {
            const response = await fetch(
              `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  contents: [
                    {
                      parts: [
                        {
                          text: `ÌòÑÏû¨Í∞ÄÏÇ¨: ${editableLyrics}\nÏöîÏ≤≠: ${revisionPrompt}`,
                        },
                      ],
                    },
                  ],
                  systemInstruction: { parts: [{ text: systemPrompt }] },
                  generationConfig: { responseMimeType: "application/json" },
                }),
              }
            );
            const data = await response.json();
            const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
            if (text) {
              setEditableLyrics(JSON.parse(text).lyrics);
              setRevisionPrompt("");
              showToast("ÏàòÏ†ï ÏôÑÎ£å!");
            }
          } catch (e) {
            showToast("Ïò§Î•ò Î∞úÏÉù");
          } finally {
            setIsGenerating(false);
          }
        };

        const handleGenerate = async (lang = "ko") => {
          if (!apiKey) {
            setShowApiModal(true);
            return;
          }
          setIsGenerating(true);
          setHasResult(false);
          const styleInstruction = `Generate a long, highly detailed music style prompt in English for Suno AI.`;
          const systemPrompt =
            lang === "en"
              ? `Master Producer. ${styleInstruction} JSON: {"style_prompt": "string", "lyrics": "string"}`
              : `ÎßàÏä§ÌÑ∞ ÌîÑÎ°úÎìÄÏÑú. Í∞ÄÏÇ¨Îäî ÌïúÍµ≠Ïñ¥, 'style_prompt'Îäî Î¨¥Ï°∞Í±¥ ÏòÅÏñ¥Î°úÎßå Í∏∏Í≤å ÏûëÏÑ±. JSON: {"style_prompt": "string", "lyrics": "string"}`;

          try {
            const response = await fetch(
              `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
              {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                  contents: [
                    {
                      parts: [
                        {
                          text: `Ï†úÎ™©: ${title}, Ïû•Î•¥: ${selectedGenres.join(
                            ","
                          )}, ÏòÅÍ∞ê: ${prompt}`,
                        },
                      ],
                    },
                  ],
                  systemInstruction: { parts: [{ text: systemPrompt }] },
                  generationConfig: { responseMimeType: "application/json" },
                }),
              }
            );
            const data = await response.json();
            const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
            if (text) {
              const parsed = JSON.parse(text);
              setEditableStyle(parsed.style_prompt);
              setEditableLyrics(parsed.lyrics);
              setHasResult(true);
            }
          } catch (e) {
            showToast("ÏÉùÏÑ± Ïã§Ìå®");
          } finally {
            setIsGenerating(false);
          }
        };

        const copyToClipboard = (text, type) => {
          const textArea = document.createElement("textarea");
          textArea.value = text;
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand("copy");
          document.body.removeChild(textArea);
          setCopyStatus((prev) => ({ ...prev, [type]: true }));
          setTimeout(
            () => setCopyStatus((prev) => ({ ...prev, [type]: false })),
            2000
          );
        };

        if (!isEntered) {
          return (
            <div className="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center overflow-hidden text-center">
              {[...Array(30)].map((_, i) => (
                <div
                  key={i}
                  className="star"
                  style={{
                    top: `${Math.random() * 100}%`,
                    left: `${Math.random() * 100}%`,
                    width: "3px",
                    height: "3px",
                    "--duration": `${3 + Math.random() * 3}s`,
                    position: "absolute",
                    background: "white",
                    borderRadius: "50%",
                  }}
                />
              ))}
              <div className="relative flex flex-col items-center space-y-12 animate-in fade-in zoom-in duration-1000">
                <div className="flex items-center justify-center gap-10">
                  <div className="animate-float text-blue-400">
                    <Icon name="Music" size={80} />
                  </div>
                  <div className="animate-rotate-slow text-purple-400">
                    <Icon name="Disc" size={110} />
                  </div>
                  <div className="animate-float text-pink-400">
                    <Icon name="Mic" size={80} />
                  </div>
                </div>
                <h1 className="text-7xl font-black bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 uppercase tracking-tighter">
                  Electoy Studio
                </h1>
                <button
                  onClick={() => setIsEntered(true)}
                  className="px-24 py-8 bg-purple-600 rounded-full font-black text-2xl text-white shadow-[0_0_40px_rgba(168,85,247,0.7)] active:scale-95 transition-all flex items-center gap-5 animate-pulse-glow uppercase tracking-widest"
                >
                  START PRODUCTION
                </button>
              </div>
              <div className="absolute bottom-10 text-slate-700 font-black text-xs uppercase tracking-[0.6em] opacity-40">
                Electoy Studio ‚Ä¢ Master v11.3
              </div>
            </div>
          );
        }

        return (
          <div className="app-container text-slate-100 bg-slate-950 text-left">
            <header className="shrink-0 bg-slate-900/90 backdrop-blur-md border-b-2 border-slate-800 p-6 flex items-center justify-between sticky top-0 z-50">
              <div className="flex items-center gap-4 text-left text-left text-left text-left text-left">
                <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-lg text-white">
                  <Icon name="Music" size={24} />
                </div>
                <h1 className="font-black text-2xl uppercase tracking-tight text-left">
                  Electoy Studio
                </h1>
              </div>
              <div className="flex items-center gap-3 text-left text-left text-left text-left text-left">
                <button
                  onClick={() => showToast("Ï£ºÏÜå Î≥µÏÇ¨Îê®!")}
                  className="p-4 rounded-xl bg-slate-800 text-blue-400 hover:bg-slate-700 transition-all shadow-inner text-left"
                >
                  <Icon name="Share" size={24} />
                </button>
                <button
                  onClick={() => setShowApiModal(true)}
                  className={`p-4 rounded-xl ${
                    apiKey
                      ? "text-green-400 bg-green-900/30"
                      : "text-slate-400 bg-slate-800"
                  } shadow-inner text-left`}
                >
                  <Icon name="Key" size={24} />
                </button>
              </div>
            </header>
            <main className="flex-1 overflow-y-auto custom-scrollbar p-8 space-y-12 pb-56 text-left text-left text-left text-left text-left">
              {toast.show && (
                <div className="fixed top-28 left-1/2 -translate-x-1/2 z-[200] px-10 py-5 bg-purple-600 text-white font-black text-xl rounded-full shadow-2xl animate-bounce text-center">
                  {toast.message}
                </div>
              )}

              <section className="space-y-4 text-left text-left text-left text-left text-left">
                <label className="text-sm font-black text-slate-500 uppercase tracking-widest ml-2 text-left">
                  Project Title
                </label>
                <input
                  type="text"
                  value={title}
                  onChange={(e) => setTitle(e.target.value)}
                  placeholder="Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
                  className="w-full bg-slate-900 border-2 border-slate-800 rounded-2xl px-8 py-5 text-2xl font-bold outline-none focus:border-purple-500 shadow-inner text-left"
                />
              </section>

              <section className="space-y-6 text-left text-left text-left text-left text-left">
                <label className="text-sm font-black text-slate-500 uppercase ml-2 flex items-center gap-4 text-left">
                  <Icon name="Sparkles" size={20} /> Ïä§ÌÉÄÏùº ÌîÑÎ¶¨ÏÖã ÎùºÏù¥Î∏åÎü¨Î¶¨
                </label>
                <div className="flex flex-wrap gap-2 text-left text-left text-left text-left text-left">
                  {themes.map((cat) => (
                    <button
                      key={cat.category}
                      onClick={() => setActiveThemeTab(cat.category)}
                      className={`px-4 py-2 text-sm font-black rounded-lg transition-all ${
                        activeThemeTab === cat.category
                          ? "active-tab"
                          : "bg-slate-900 text-slate-500 border border-slate-800"
                      }`}
                    >
                      {cat.category}
                    </button>
                  ))}
                </div>
                <div className="grid grid-cols-2 sm:grid-cols-3 gap-3 text-left text-left text-left text-left text-left">
                  {themes
                    .find((t) => t.category === activeThemeTab)
                    ?.items.map((item) => (
                      <button
                        key={item.id}
                        onClick={() => {
                          setSelectedGenres([item.genre]);
                          setSelectedMoods([item.mood]);
                          setVocalType(item.vocal);
                          setBpm(item.bpm);
                          showToast(`'${item.label}' Ï†ÅÏö©!`);
                        }}
                        className="px-5 py-4 bg-slate-900 border border-slate-800 rounded-2xl text-base font-bold text-slate-300 hover:border-purple-500 transition-all shadow-lg active:scale-95 text-left leading-tight h-full"
                      >
                        {item.label}
                      </button>
                    ))}
                </div>
              </section>

              <section className="grid grid-cols-2 gap-6 text-left text-left text-left text-left text-left text-left text-left text-left">
                <div className="space-y-4 text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                  <label className="text-sm font-black text-slate-500 ml-2 uppercase text-left">
                    Ïû•Î•¥
                  </label>
                  <div className="h-80 overflow-y-auto border-2 border-slate-800 rounded-[2rem] bg-slate-900/40 p-4 custom-scrollbar text-left">
                    {genresList.map((g) => (
                      <button
                        key={g}
                        onClick={() =>
                          setSelectedGenres((prev) =>
                            prev.includes(g)
                              ? prev.length > 1
                                ? prev.filter((i) => i !== g)
                                : prev
                              : prev.length < 3
                              ? [...prev, g]
                              : prev
                          )
                        }
                        className={`w-full text-left px-6 py-5 rounded-2xl mb-2 text-xl font-bold transition-all ${
                          selectedGenres.includes(g)
                            ? "bg-purple-600 text-white"
                            : "text-slate-500 hover:bg-slate-800"
                        }`}
                      >
                        {g}
                      </button>
                    ))}
                  </div>
                </div>
                <div className="space-y-4 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                  <label className="text-sm font-black text-slate-500 ml-2 uppercase text-left">
                    Î¨¥Îìú
                  </label>
                  <div className="h-80 overflow-y-auto border-2 border-slate-800 rounded-[2rem] bg-slate-900/40 p-4 custom-scrollbar text-left">
                    {moodsList.map((m) => (
                      <button
                        key={m}
                        onClick={() =>
                          setSelectedMoods((prev) =>
                            prev.includes(m)
                              ? prev.length > 1
                                ? prev.filter((i) => i !== m)
                                : prev
                              : prev.length < 3
                              ? [...prev, m]
                              : prev
                          )
                        }
                        className={`w-full text-left px-6 py-5 rounded-2xl mb-2 text-xl font-bold transition-all ${
                          selectedMoods.includes(m)
                            ? "bg-pink-600 text-white"
                            : "text-slate-500 hover:bg-slate-800"
                        }`}
                      >
                        {m}
                      </button>
                    ))}
                  </div>
                </div>
              </section>

              <section className="bg-slate-900 border-2 border-slate-800 rounded-[3rem] p-8 space-y-10 shadow-2xl text-left text-left text-left text-left text-left">
                <div className="flex justify-between items-center text-left text-left text-left text-left text-left">
                  <label className="text-xl font-black text-slate-500 uppercase tracking-widest text-left text-left text-left text-left text-left">
                    ÏÉÅÏÑ∏ ÏÑ§Ï†ï
                  </label>
                  <button
                    onClick={() =>
                      setVocalType(
                        isInstrumental ? "Ïó¨ÏÑ± Î≥¥Ïª¨" : "Ïó∞Ï£ºÍ≥° (Instrumental)"
                      )
                    }
                    className={`px-8 py-4 rounded-xl text-lg font-black transition-all ${
                      isInstrumental
                        ? "bg-purple-600 text-white shadow-lg border-2 border-purple-400"
                        : "bg-slate-800 text-slate-500"
                    }`}
                  >
                    Ïó∞Ï£ºÍ≥° Î™®Îìú {isInstrumental ? "ON" : "OFF"}
                  </button>
                </div>
                {isInstrumental && (
                  <div className="grid grid-cols-2 gap-4 pb-4 animate-in zoom-in-95 text-left text-left text-left text-left text-left text-left text-left">
                    {instrumentalSubStyles.map((s) => (
                      <button
                        key={s.id}
                        onClick={() => {
                          setSelectedGenres([s.genre]);
                          setSelectedMoods([s.mood]);
                          setInstrument(s.inst);
                          setBpm(s.bpm);
                          showToast(`'${s.label}' ÏµúÏ†ÅÌôî!`);
                        }}
                        className="p-5 bg-slate-950 border-2 border-slate-800 rounded-2xl text-lg font-bold text-slate-300 text-left hover:border-purple-400 transition-all shadow-lg text-left"
                      >
                        {s.label}
                      </button>
                    ))}
                  </div>
                )}
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8 text-left text-left text-left text-left text-left text-left text-left text-left">
                  <button
                    onClick={() => setShowPersonaModal(true)}
                    className="p-8 bg-slate-950 border-2 border-slate-800 rounded-[2.5rem] text-left border-l-[12px] border-l-purple-500 active:scale-95 transition-all shadow-xl min-h-[160px] text-left text-left text-left text-left text-left"
                  >
                    <div className="text-base text-purple-400 font-black mb-4 uppercase tracking-widest text-left">
                      {persona.gender} {persona.age}
                    </div>
                    <div className="text-2xl font-black leading-snug text-left text-left text-left text-left text-left">
                      Î≥¥Ïª¨ ÌéòÎ•¥ÏÜåÎÇò ÏÑ§Ï†ï
                    </div>
                  </button>
                  <div className="space-y-6 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    <select
                      value={instrument}
                      onChange={(e) => setInstrument(e.target.value)}
                      className="w-full bg-slate-950 border-2 border-slate-800 rounded-[1.5rem] p-6 text-xl font-bold text-white outline-none appearance-none shadow-inner text-left"
                    >
                      {instrumentsList.map((i) => (
                        <option key={i} value={i}>
                          {i}
                        </option>
                      ))}
                    </select>
                    <select
                      value={vocalType}
                      onChange={(e) => setVocalType(e.target.value)}
                      className="w-full bg-slate-950 border-2 border-slate-800 rounded-[1.5rem] p-6 text-xl font-bold text-white outline-none appearance-none shadow-inner text-left"
                    >
                      {vocalOptions.map((o) => (
                        <option key={o} value={o}>
                          {o}
                        </option>
                      ))}
                    </select>
                  </div>
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-8 pt-6 border-t border-slate-800 text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                  <div className="space-y-4 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    <div className="flex justify-between text-sm font-black text-slate-400 uppercase tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                      <span>BPM (ÏùåÏïÖ ÏÜçÎèÑ)</span>
                      <span className="text-purple-400 text-2xl font-mono text-left">
                        {bpm}
                      </span>
                    </div>
                    <input
                      type="range"
                      min="40"
                      max="200"
                      value={bpm}
                      onChange={(e) => setBpm(parseInt(e.target.value))}
                      className="w-full h-3 cursor-pointer rounded-lg appearance-none bg-slate-800 text-left"
                    />
                  </div>
                  <div className="space-y-4 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    <div className="flex justify-between text-sm font-black text-slate-400 uppercase tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                      <span>Í≥° Í∏∏Ïù¥ (Duration)</span>
                      <span className="text-pink-400 text-2xl font-mono text-left">
                        {duration}s
                      </span>
                    </div>
                    <input
                      type="range"
                      min="30"
                      max="360"
                      step="10"
                      value={duration}
                      onChange={(e) => setDuration(parseInt(e.target.value))}
                      className="w-full h-3 cursor-pointer rounded-lg appearance-none bg-slate-800 text-left"
                    />
                  </div>
                </div>
              </section>

              <section className="space-y-8 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                <textarea
                  value={prompt}
                  onChange={(e) => setPrompt(e.target.value)}
                  placeholder="ÏùåÏïÖÏ†Å ÏïÑÏù¥ÎîîÏñ¥Î•º ÏûêÏú†Î°≠Í≤å Ï†ÅÏñ¥Î≥¥ÏÑ∏Ïöî..."
                  className="w-full bg-slate-950 border-2 border-slate-800 rounded-[3rem] p-10 h-80 text-2xl font-bold outline-none focus:border-purple-500 transition-all text-white shadow-inner leading-relaxed text-left text-left"
                />
                <div className="grid grid-cols-2 gap-8 text-white text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                  <button
                    onClick={() => handleGenerate("ko")}
                    disabled={isGenerating}
                    className="py-10 bg-gradient-to-tr from-purple-600 to-pink-600 rounded-[2.5rem] font-black text-3xl shadow-xl flex items-center justify-center gap-6 active:scale-95 transition-all text-center text-center text-center text-center text-center"
                  >
                    {isGenerating ? (
                      <Icon name="Refresh" className="animate-spin" size={32} />
                    ) : (
                      <Icon name="Sparkles" size={32} />
                    )}{" "}
                    ÏÉùÏÑ±
                  </button>
                  <button
                    onClick={() => handleGenerate("en")}
                    disabled={isGenerating}
                    className="py-10 bg-slate-800 border-2 border-slate-700 rounded-[2.5rem] font-black text-3xl text-blue-400 flex items-center justify-center gap-6 active:scale-95 shadow-xl text-center text-center text-center text-center text-center text-center"
                  >
                    ENGLISH
                  </button>
                </div>
              </section>

              <section className="pt-24 border-t-4 border-slate-900 space-y-16 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                {hasResult && (
                  <div className="space-y-20 animate-in slide-in-from-bottom-10 duration-700 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    <div className="bg-slate-900 border-2 border-slate-800 rounded-[4rem] p-12 border-l-[24px] border-l-purple-500 shadow-2xl overflow-hidden text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                      <div className="flex justify-between items-center mb-10 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                        <span className="text-2xl font-black text-purple-400 uppercase tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                          Í∞ÄÏÇ¨ (Structured Lyrics)
                        </span>
                        <button
                          onClick={() =>
                            copyToClipboard(editableLyrics, "lyrics")
                          }
                          className="p-6 bg-slate-800 rounded-[2rem] shadow-lg active:scale-90 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"
                        >
                          {copyStatus.lyrics ? (
                            <Icon
                              name="Check"
                              size={32}
                              className="text-green-400"
                            />
                          ) : (
                            <Icon name="Copy" size={32} />
                          )}
                        </button>
                      </div>
                      <textarea
                        className="editable-area h-[800px] text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                        value={editableLyrics}
                        onChange={(e) => setEditableLyrics(e.target.value)}
                      />
                      <div className="mt-12 p-10 bg-slate-950/60 rounded-[3rem] border-2 border-dashed border-slate-700 space-y-8 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                        <label className="text-lg font-black text-slate-500 uppercase flex items-center gap-5 tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                          <Icon name="Pencil" size={20} /> AI Í∞ÄÏÇ¨ ÏàòÏ†ï ÎπÑÏÑú
                        </label>
                        <input
                          type="text"
                          value={revisionPrompt}
                          onChange={(e) => setRevisionPrompt(e.target.value)}
                          placeholder="ÏàòÏ†ï ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."
                          className="revision-input text-2xl text-white shadow-inner text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                        />
                        <button
                          onClick={handleRefineLyrics}
                          className="w-full py-8 bg-slate-800 hover:bg-slate-700 rounded-3xl text-2xl font-black border-2 border-slate-700 transition-all text-white shadow-xl text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"
                        >
                          ÏàòÏ†ï ÏöîÏ≤≠ÌïòÍ∏∞
                        </button>
                      </div>
                    </div>
                    <div className="bg-slate-900 border-2 border-slate-800 rounded-[4rem] p-12 border-l-[24px] border-l-pink-500 shadow-2xl text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                      <div className="flex justify-between items-center mb-10 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                        <span className="text-2xl font-black text-pink-400 uppercase tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                          Ïä§ÌÉÄÏùº (English Tags Only)
                        </span>
                        <button
                          onClick={() =>
                            copyToClipboard(editableStyle, "style")
                          }
                          className="p-6 bg-slate-800 rounded-[2rem] shadow-lg active:scale-90 text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"
                        >
                          {copyStatus.style ? (
                            <Icon
                              name="Check"
                              size={40}
                              className="text-green-400"
                            />
                          ) : (
                            <Icon name="Copy" size={40} />
                          )}
                        </button>
                      </div>
                      <textarea
                        className="editable-area h-64 font-mono text-pink-100 shadow-inner font-bold text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                        value={editableStyle}
                        onChange={(e) => setEditableStyle(e.target.value)}
                      />
                    </div>
                  </div>
                )}
              </section>
            </main>
            {/* ÏûëÏóÖÏã§ ÌïòÎã® Î≤ÑÏ†Ñ Ìë∏ÌÑ∞ ÏÇ≠Ï†úÌïòÏó¨ Í≥µÍ∞Ñ ÌôïÎ≥¥ */}

            {showApiModal && (
              <div
                className="fixed inset-0 z-[300] modal-overlay flex items-center justify-center p-12 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                onClick={() => setShowApiModal(false)}
              >
                <div
                  className="bg-slate-900 border-4 border-slate-700 w-full rounded-[4rem] p-16 space-y-12 text-left animate-in zoom-in-95 shadow-2xl text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                  onClick={(e) => e.stopPropagation()}
                >
                  <div className="flex justify-between items-center text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    <h3 className="font-black text-4xl text-green-400 uppercase tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                      API Key Setup
                    </h3>
                    <div
                      className="cursor-pointer text-slate-500 hover:text-white"
                      onClick={() => setShowApiModal(false)}
                    >
                      <Icon name="X" size={48} />
                    </div>
                  </div>
                  <input
                    type="password"
                    placeholder="Key ÏûÖÎ†•..."
                    value={apiKey}
                    onChange={(e) => setApiKey(e.target.value)}
                    className="w-full bg-slate-800 border-2 border-slate-700 rounded-[2rem] p-10 text-5xl text-white shadow-inner focus:border-purple-500 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                    autoFocus
                  />
                  <button
                    onClick={() => setShowApiModal(false)}
                    className="w-full bg-purple-600 py-10 rounded-[2.5rem] font-black text-4xl shadow-xl active:scale-95 text-white text-left text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"
                  >
                    Save
                  </button>
                </div>
              </div>
            )}
            {showPersonaModal && (
              <div
                className="fixed inset-0 z-[300] modal-overlay flex items-center justify-center p-12 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                onClick={() => setShowPersonaModal(false)}
              >
                <div
                  className="bg-slate-900 border-4 border-slate-700 w-full max-h-[85vh] overflow-y-auto rounded-[4rem] p-16 space-y-14 animate-in zoom-in-95 custom-scrollbar shadow-2xl text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                  onClick={(e) => e.stopPropagation()}
                >
                  <div className="flex justify-between items-center border-b-2 border-slate-800 pb-10 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    <h3 className="font-black text-4xl text-purple-400 uppercase tracking-widest text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                      Vocal Persona
                    </h3>
                    <div
                      className="cursor-pointer text-slate-500 hover:text-white"
                      onClick={() => setShowPersonaModal(false)}
                    >
                      <Icon name="X" size={48} />
                    </div>
                  </div>
                  <div className="space-y-10 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                    {[
                      {
                        key: "gender",
                        label: "ÏÑ±Î≥Ñ",
                        opts: ["Ïó¨ÏÑ±", "ÎÇ®ÏÑ±", "Ï§ëÏÑ±Ï†Å"],
                      },
                      {
                        key: "age",
                        label: "Ïó∞Î†πÎåÄ",
                        opts: ["10ÎåÄ", "20ÎåÄ", "30ÎåÄ", "Ï§ëÌõÑÌïú"],
                      },
                      {
                        key: "tone",
                        label: "ÌÜ§",
                        opts: [
                          "ÎßëÍ≥† Íπ®ÎÅóÌïú",
                          "ÌóàÏä§ÌÇ§Ìïú",
                          "ÌååÏõåÌíÄÌïú",
                          "Í∞êÎØ∏Î°úÏö¥",
                          "ÎÇ†Ïπ¥Î°úÏö¥",
                        ],
                      },
                      {
                        key: "style",
                        label: "Ï∞ΩÎ≤ï",
                        opts: [
                          "Í∞êÏÑ±Ï†ÅÏù∏",
                          "Í∏∞ÍµêÏûàÎäî",
                          "Îã¥Î∞±Ìïú",
                          "ÌùêÎäêÎÅºÎäî",
                          "Ï†àÏ†úÎêú",
                        ],
                      },
                    ].map((item) => (
                      <div
                        key={item.key}
                        className="space-y-6 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                      >
                        <label className="text-xl font-black text-slate-500 uppercase ml-4 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left">
                          {item.label}
                        </label>
                        <select
                          value={persona[item.key]}
                          onChange={(e) =>
                            setPersona((prev) => ({
                              ...prev,
                              [item.key]: e.target.value,
                            }))
                          }
                          className="w-full bg-slate-800 border-2 border-slate-800 rounded-[2rem] p-10 text-3xl font-bold text-white shadow-inner focus:border-purple-500 outline-none text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"
                        >
                          {item.opts.map((o) => (
                            <option key={o} value={o}>
                              {o}
                            </option>
                          ))}
                        </select>
                      </div>
                    ))}
                  </div>
                  <button
                    onClick={() => setShowPersonaModal(false)}
                    className="w-full bg-purple-600 py-10 rounded-[2.5rem] font-black text-4xl shadow-xl active:scale-95 text-white text-left text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center text-center"
                  >
                    Apply
                  </button>
                </div>
              </div>
            )}
          </div>
        );
      };

      const container = document.getElementById("root");
      const root = ReactDOM.createRoot(container);
      root.render(React.createElement(App));
    </script>
  </body>
</html>
