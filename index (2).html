<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Electoy Studio - AI ë®¤ì§ ìŠ¤íŠœë””ì˜¤</title>
    <!-- í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬: React, ReactDOM, Babel, Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Pretendard', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            overflow: hidden; 
            height: 100vh;
            background-color: #020617;
        }
        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        /* ì‹œì¸ì„± ì¢‹ì€ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; border: 2px solid #020617; }
        
        /* ì„¸ë ¨ëœ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ */
        @keyframes rotate-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-rotate-slow { animation: rotate-slow 25s linear infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
        .animate-float { animation: float 5s ease-in-out infinite; }
        @keyframes star-blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }
        .star { position: absolute; background: white; border-radius: 50%; animation: star-blink var(--duration) ease-in-out infinite; }
        @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 15px rgba(168, 85, 247, 0.3); } 50% { box-shadow: 0 0 30px rgba(168, 85, 247, 0.5); } }
        .animate-pulse-glow { animation: pulse-glow 4s infinite; }

        /* [ì •ë°€ ì¡°ì •] ê¸€ìê°€ ì¹¸ì„ ë„˜ì§€ ì•Šë„ë¡ í¬ê¸° ë°¸ëŸ°ìŠ¤ íŒ¨ì¹˜ */
        .active-tab { background: #a855f7; color: white !important; border-radius: 0.6rem; box-shadow: 0 0 15px rgba(168, 85, 247, 0.3); border: none !important; }
        .modal-overlay { background: rgba(0, 0, 0, 0.96); backdrop-filter: blur(15px); z-index: 100; }
        
        .editable-area {
            width: 100%;
            background: rgba(15, 23, 42, 0.98);
            border: 2px solid #334155;
            border-radius: 1.5rem;
            padding: 1.2rem;
            color: #f8fafc;
            font-size: 1.05rem; /* ì¹¸ì„ ë¬¼ì§€ ì•Šë„ë¡ ì •ë°€ ìµœì í™” */
            line-height: 1.6;
            outline: none;
            resize: none;
            font-weight: 500;
        }
        .revision-input {
            background: rgba(30, 41, 59, 0.8);
            border: 2px dashed #475569;
            border-radius: 1rem;
            padding: 1rem;
            color: #e2e8f0;
            width: 100%;
            font-size: 1rem;
            outline: none;
        }
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.2em;
        }
        input[type="range"] {
            accent-color: #a855f7;
        }
    </style>
</head>
<body class="text-slate-100 flex justify-center text-left">
    <div id="root" class="w-full max-w-md border-x border-slate-900 bg-slate-950 relative shadow-2xl overflow-hidden"></div>

    <script>
        // ì•„ì´ì½˜ ë¦¬ì†ŒìŠ¤ ì‹œìŠ¤í…œ
        const Icons = {
            Music: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>`,
            Sparkles: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"></path></svg>`,
            Key: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m21 2-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.778-7.778Zm0 0L15.5 7.5m0 0 3 3L22 7l-3-3-3.5 3.5Z"></path></svg>`,
            Copy: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg>`,
            Check: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>`,
            Pencil: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>`,
            Share: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" x2="12" y1="2" y2="15"></line></svg>`,
            ChevronRight: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>`,
            X: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`,
            Disc: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle></svg>`,
            User: () => `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>`
        };

        const Icon = ({ name, size = 24, className = "" }) => {
            const svgStr = Icons[name] ? Icons[name]() : '';
            return React.createElement('div', {
                className: className,
                style: { width: size, height: size, display: 'flex', alignItems: 'center', justifyContent: 'center' },
                dangerouslySetInnerHTML: { __html: svgStr.replace('width="24"', `width="${size}"`).replace('height="24"', `height="${size}"`) }
            });
        };
    </script>

    <!-- React ì•± ë©”ì¸ ë¡œì§ -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const genresList = ['K-Pop', 'ë°œë¼ë“œ', 'íŒ', 'í™í•©', 'R&B', 'ë¡', 'EDM', 'ì¬ì¦ˆ', 'Lo-fi', 'ì–´ì¿ ìŠ¤í‹±', 'í´ë˜ì‹', 'ì‹œí‹°íŒ', 'íŠ¸ë¡œíŠ¸', 'êµ­ì•…', 'ë‰´ì—ì´ì§€', 'ì›”ë“œë®¤ì§'];
        const moodsList = ['í–‰ë³µí•œ', 'ìŠ¬í”ˆ', 'í™œê¸°ì°¬', 'ì°¨ë¶„í•œ', 'ì–´ë‘ìš´', 'ëª½í™˜ì ì¸', 'ì›…ì¥í•œ', 'ê·¸ë¦¬ìš´', 'ì„¸ë ¨ëœ', 'ì„¤ë ˆëŠ”', 'ìœ„ë¡œê°€ë˜ëŠ”', 'ì„¹ì‹œí•œ', 'í¸ì•ˆí•œ', 'ìš°ì•„í•œ'];
        const instrumentsList = ['ì„¤ì • ì•ˆ í•¨', 'í”¼ì•„ë…¸', 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', 'ì¼ë ‰ ê¸°íƒ€', 'ì‹ ë””ì‚¬ì´ì €', 'ë°”ì´ì˜¬ë¦°', 'ì²¼ë¡œ', 'ìƒ‰ì†Œí°', 'íŠ¸ëŸ¼í«', 'í•˜í”„', 'ë“œëŸ¼ ë¨¸ì‹ ', 'ë² ì´ìŠ¤ ê¸°íƒ€', 'ê°€ì•¼ê¸ˆ', 'ë“œëŸ¼ì„¸íŠ¸', 'ì „ê¸° í”¼ì•„ë…¸'];
        const vocalOptions = ['ì—¬ì„± ë³´ì»¬', 'ë‚¨ì„± ë³´ì»¬', 'ë‚¨ë…€ ë“€ì—£', 'í•©ì°½ë‹¨', 'ì—°ì£¼ê³¡ (Instrumental)'];

        const App = () => {
            const [isEntered, setIsEntered] = useState(false);
            const [apiKey, setApiKey] = useState('');
            const [title, setTitle] = useState('');
            const [persona, setPersona] = useState({ gender: 'ì—¬ì„±', age: '20ëŒ€', tone: 'ë§‘ê³  ê¹¨ë—í•œ', style: 'ê°ì„±ì ì¸', voiceId: '' });
            const [selectedGenres, setSelectedGenres] = useState(['K-Pop']);
            const [selectedMoods, setSelectedMoods] = useState(['í™œê¸°ì°¬']);
            const [bpm, setBpm] = useState(120);
            const [duration, setDuration] = useState(120);
            const [vocalType, setVocalType] = useState('ì—¬ì„± ë³´ì»¬');
            const [instrument, setInstrument] = useState('ì„¤ì • ì•ˆ í•¨');
            const [prompt, setPrompt] = useState('');
            const [revisionPrompt, setRevisionPrompt] = useState('');
            const [showApiModal, setShowApiModal] = useState(false);
            const [showPersonaModal, setShowPersonaModal] = useState(false);
            const [toast, setToast] = useState({ show: false, message: '' });
            const [isGenerating, setIsGenerating] = useState(false);
            const [activeThemeTab, setActiveThemeTab] = useState('ì¸ê¸° ì¥ë¥´');
            const [editableStyle, setEditableStyle] = useState('');
            const [editableLyrics, setEditableLyrics] = useState('');
            const [hasResult, setHasResult] = useState(false);
            const [copyStatus, setCopyStatus] = useState({ lyrics: false, style: false });

            const themes = [
                { category: 'ì¸ê¸° ì¥ë¥´', items: [
                    { id: 'p_kpop', label: 'ğŸ¤ ëŒ„ìŠ¤ / K-POP', genre: 'K-Pop', mood: 'í™œê¸°ì°¬', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 124 },
                    { id: 'p_rnb', label: 'ğŸ¸ í™í•© / R&B', genre: 'í™í•©', mood: 'ì„¸ë ¨ëœ', inst: 'ë“œëŸ¼ ë¨¸ì‹ ', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 95 },
                    { id: 'p_indie', label: 'ğŸ¹ ì¸ë”” / ì–´ì¿ ìŠ¤í‹±', genre: 'ì–´ì¿ ìŠ¤í‹±', mood: 'ì°¨ë¶„í•œ', inst: 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 85 },
                    { id: 'p_ost', label: 'ğŸ¬ OST', genre: 'ë°œë¼ë“œ', mood: 'ì›…ì¥í•œ', inst: 'ë°”ì´ì˜¬ë¦°', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 75 },
                    { id: 'p_retro', label: 'ğŸ•°ï¸ ëª…ê³¡ / ë ˆíŠ¸ë¡œ', genre: 'ì‹œí‹°íŒ', mood: 'ê·¸ë¦¬ìš´', inst: 'ë² ì´ìŠ¤ ê¸°íƒ€', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 110 },
                    { id: 'p_pop', label: 'ğŸŒ POP / í•´ì™¸', genre: 'íŒ', mood: 'í–‰ë³µí•œ', inst: 'ì¼ë ‰ ê¸°íƒ€', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 105 },
                    { id: 'p_lofi', label: 'ğŸŒ™ ë¡œíŒŒì´ / Lo-fi', genre: 'Lo-fi', mood: 'ì°¨ë¶„í•œ', inst: 'ì „ê¸° í”¼ì•„ë…¸', vocal: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 90 },
                    { id: 'p_rock', label: 'ğŸ¸ ë¡ / ì–¼í„°ë„ˆí‹°ë¸Œ', genre: 'ë¡', mood: 'í™œê¸°ì°¬', inst: 'ì¼ë ‰ ê¸°íƒ€', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 120 }
                ]},
                { category: 'ë°œë¼ë“œ', items: [
                    { id: 'b_bye', label: 'ğŸ’” ì´ë³„Â·ê·¸ë¦¬ì›€', genre: 'ë°œë¼ë“œ', mood: 'ìŠ¬í”ˆ', inst: 'í”¼ì•„ë…¸', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 68 },
                    { id: 'b_love', label: 'ğŸ’• ì‚¬ë‘Â·ì„¤ë ˜', genre: 'ë°œë¼ë“œ', mood: 'ì„¤ë ˆëŠ”', inst: 'í”¼ì•„ë…¸', vocal: 'ë‚¨ë…€ ë“€ì—£', bpm: 76 },
                    { id: 'b_sad_tear', label: 'ğŸŒ§ï¸ ìŠ¬í””Â·ëˆˆë¬¼', genre: 'ë°œë¼ë“œ', mood: 'ìŠ¬í”ˆ', inst: 'ì²¼ë¡œ', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 62 },
                    { id: 'b_heal', label: 'ğŸŒ¿ ìœ„ë¡œÂ·íë§', genre: 'ë°œë¼ë“œ', mood: 'ìœ„ë¡œê°€ë˜ëŠ”', inst: 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 80 },
                    { id: 'b_night', label: 'ğŸŒ™ ë°¤ ê°ì„±', genre: 'ë°œë¼ë“œ', mood: 'ëª½í™˜ì ì¸', inst: 'ì „ê¸° í”¼ì•„ë…¸', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 70 },
                    { id: 'b_ost_emo', label: 'ğŸ¬ OST ê°ì„±', genre: 'ë°œë¼ë“œ', mood: 'ì›…ì¥í•œ', inst: 'ë°”ì´ì˜¬ë¦°', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 74 },
                    { id: 'b_high', label: 'ğŸ”¥ ê³ ìŒÂ·í­ë°œ', genre: 'ë°œë¼ë“œ', mood: 'ì›…ì¥í•œ', inst: 'ì¼ë ‰ ê¸°íƒ€', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 72 },
                    { id: 'b_aco', label: 'ğŸ¸ ì–´ì¿ ìŠ¤í‹±Â·ê°ì„±', genre: 'ì–´ì¿ ìŠ¤í‹±', mood: 'ì°¨ë¶„í•œ', inst: 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 82 }
                ]},
                { category: 'ëŒ„ìŠ¤/ì¼ë ‰', items: [
                    { id: 'd_kpop', label: 'ğŸ¤ K-POP ëŒ„ìŠ¤', genre: 'K-Pop', mood: 'í™œê¸°ì°¬', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 128 },
                    { id: 'd_edm', label: 'ğŸ”¥ EDM / í˜ìŠ¤í‹°ë²Œ', genre: 'EDM', mood: 'í™œê¸°ì°¬', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 132 },
                    { id: 'd_dance_pop', label: 'ğŸ•º ëŒ„ìŠ¤ íŒ', genre: 'íŒ', mood: 'í–‰ë³µí•œ', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 118 },
                    { id: 'd_hou', label: 'ğŸ§ í•˜ìš°ìŠ¤', genre: 'EDM', mood: 'ì„¸ë ¨ëœ', inst: 'ë² ì´ìŠ¤ ê¸°íƒ€', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 124 },
                    { id: 'd_elp', label: 'âš¡ ì¼ë ‰íŠ¸ë¡œ íŒ', genre: 'íŒ', mood: 'í™œê¸°ì°¬', inst: 'ë“œëŸ¼ ë¨¸ì‹ ', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 120 },
                    { id: 'd_chi', label: 'ğŸŒ™ ì¹  ì¼ë ‰ / ë¡œíŒŒì´', genre: 'Lo-fi', mood: 'ëª½í™˜ì ì¸', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 95 },
                    { id: 'd_tec', label: 'ğŸ–¤ í…Œí¬ë…¸', genre: 'EDM', mood: 'ì–´ë‘ìš´', inst: 'ë“œëŸ¼ ë¨¸ì‹ ', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 135 },
                    { id: 'd_tra', label: 'ğŸŒŒ íŠ¸ëœìŠ¤', genre: 'EDM', mood: 'ëª½í™˜ì ì¸', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 140 }
                ]},
                { category: 'ì „í†µê°€ìš”', items: [
                    { id: 't_pure', label: 'ğŸ™ï¸ ì •í†µ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', mood: 'ê·¸ë¦¬ìš´', inst: 'ìƒ‰ì†Œí°', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 135 },
                    { id: 't_semi', label: 'ğŸ’ƒ ì„¸ë¯¸ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', mood: 'í–‰ë³µí•œ', inst: 'í”¼ì•„ë…¸', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 130 },
                    { id: 't_new', label: 'âœ¨ ì‹ ì„¸ëŒ€ íŠ¸ë¡¯', genre: 'íŠ¸ë¡œíŠ¸', mood: 'í™œê¸°ì°¬', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 140 },
                    { id: 't_fus', label: 'ğŸ í“¨ì „ íŠ¸ë¡¯', genre: 'êµ­ì•…', mood: 'ì›…ì¥í•œ', inst: 'ê°€ì•¼ê¸ˆ', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 110 }
                ]},
                { category: 'í“¨ì „/ì‹¤í—˜', items: [
                    { id: 'f_raga', label: 'ë¼ê°€ ì• ì‹œë“œ ë¸Œë ˆì´í¬', genre: 'ì›”ë“œë®¤ì§', mood: 'ëª½í™˜ì ì¸', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 130 },
                    { id: 'f_alt_rnb', label: 'ì–¼í„°ë„ˆí‹°ë¸Œ R&B', genre: 'R&B', mood: 'ì„¸ë ¨ëœ', inst: 'ì „ê¸° í”¼ì•„ë…¸', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 90 },
                    { id: 'f_acid', label: 'ì• ì‹œë“œ í…Œí¬ë…¸ ì¬ì¦ˆ', genre: 'ì¬ì¦ˆ', mood: 'ê°•ë ¬í•œ', inst: 'ë“œëŸ¼ ë¨¸ì‹ ', vocal: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 130 },
                    { id: 'f_psych', label: 'ì‚¬ì´í‚¤ë¸ë¦­ í•˜ìš°ìŠ¤', genre: 'EDM', mood: 'ëª½í™˜ì ì¸', inst: 'ì‹ ë””ì‚¬ì´ì €', vocal: 'ì—¬ì„± ë³´ì»¬', bpm: 124 },
                    { id: 'f_hyphy', label: 'í•˜ì´í”¼ R&B', genre: 'í™í•©', mood: 'í™œê¸°ì°¬', inst: 'ë“œëŸ¼ ë¨¸ì‹ ', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 105 },
                    { id: 'f_aco_trance', label: 'ì–´ì¿ ìŠ¤í‹± íŠ¸ëœìŠ¤', genre: 'ì–´ì¿ ìŠ¤í‹±', mood: 'ëª½í™˜ì ì¸', inst: 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', vocal: 'ì—°ì£¼ê³¡ (Instrumental)', bpm: 110 },
                    { id: 'f_gfunk', label: 'G-í‘í¬ EDM', genre: 'í™í•©', mood: 'ì„¸ë ¨ëœ', inst: 'ë² ì´ìŠ¤ ê¸°íƒ€', vocal: 'ë‚¨ì„± ë³´ì»¬', bpm: 100 },
                    { id: 'f_synth_pop', label: 'ë¡œíŒŒì´ ì‹ ìŠ¤íŒ', genre: 'Lo-fi', mood: 'ì°¨ë¶„í•œ', inst: 'ì „ê¸° í”¼ì•„ë…¸', vocal: 'ë‚¨ë…€ ë“€ì—£', bpm: 90 }
                ]}
            ];

            const instrumentalSubStyles = [
                { id: 'is_1', label: '1. í”¼ì•„ë…¸ ì†”ë¡œ', genre: 'ë‰´ì—ì´ì§€', mood: 'ì°¨ë¶„í•œ', inst: 'í”¼ì•„ë…¸', bpm: 70 },
                { id: 'is_2', label: '2. ë¡œíŒŒì´ / ì¹ ', genre: 'Lo-fi', mood: 'ëª½í™˜ì ì¸', inst: 'ì „ê¸° í”¼ì•„ë…¸', bpm: 90 },
                { id: 'is_3', label: '3. ìŠ¤íŠ¸ë§ í´ë˜ì‹', genre: 'í´ë˜ì‹', mood: 'ì›…ì¥í•œ', inst: 'ë°”ì´ì˜¬ë¦°', bpm: 80 },
                { id: 'is_4', label: '4. ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', genre: 'ì–´ì¿ ìŠ¤í‹±', mood: 'ê·¸ë¦¬ìš´', inst: 'ì–´ì¿ ìŠ¤í‹± ê¸°íƒ€', bpm: 90 },
                { id: 'is_5', label: '5. R&B ì—°ì£¼', genre: 'R&B', mood: 'ì„¸ë ¨ëœ', inst: 'ì „ê¸° í”¼ì•„ë…¸', bpm: 95 },
                { id: 'is_6', label: '6. íë§ ëª…ìƒ', genre: 'ë‰´ì—ì´ì§€', mood: 'ìœ„ë¡œê°€ë˜ëŠ”', inst: 'í•˜í”„', bpm: 50 },
                { id: 'is_7', label: '7. ì¼ë ‰ ì—°ì£¼', genre: 'EDM', mood: 'ì„¸ë ¨ëœ', inst: 'ì‹ ë””ì‚¬ì´ì €', bpm: 125 },
                { id: 'is_8', label: '8. í¼ì»¤ì…˜ ë¦¬ë“¬', genre: 'ì›”ë“œë®¤ì§', mood: 'í™œê¸°ì°¬', inst: 'ë“œëŸ¼ ë¨¸ì‹ ', bpm: 125 },
                { id: 'is_9', label: '9. ì¬ì¦ˆ ì—°ì£¼', genre: 'ì¬ì¦ˆ', mood: 'ì„¸ë ¨ëœ', inst: 'íŠ¸ëŸ¼í«', bpm: 105 },
                { id: 'is_10', label: '10. ì›”ë“œë®¤ì§', genre: 'ì›”ë“œë®¤ì§', mood: 'ëª½í™˜ì ì¸', inst: 'ê°€ì•¼ê¸ˆ', bpm: 95 },
                { id: 'is_11', label: '11. ìƒ‰ì†Œí° ìœˆë“œ', genre: 'ì¬ì¦ˆ', mood: 'ì„¹ì‹œí•œ', inst: 'ìƒ‰ì†Œí°', bpm: 80 },
                { id: 'is_12', label: '12. ë‰´ì—ì´ì§€', genre: 'ë‰´ì—ì´ì§€', mood: 'ëª½í™˜ì ì¸', inst: 'í”¼ì•„ë…¸', bpm: 75 }
            ];

            const isInstrumental = vocalType.includes('ì—°ì£¼ê³¡');

            useEffect(() => {
                const savedData = localStorage.getItem('electoy-studio-config-master');
                if (savedData) {
                    try {
                        const parsed = JSON.parse(savedData);
                        if (parsed.apiKey) setApiKey(parsed.apiKey);
                    } catch (e) {}
                }
            }, []);

            useEffect(() => {
                localStorage.setItem('electoy-studio-config-master', JSON.stringify({ apiKey }));
            }, [apiKey]);

            const showToast = (msg) => {
                setToast({ show: true, message: msg });
                setTimeout(() => setToast({ show: false, message: '' }), 3000);
            };

            const handleRefineLyrics = async () => {
                if (!apiKey) { setShowApiModal(true); return; }
                setIsGenerating(true);
                const systemPrompt = `ì „ë¬¸ ì‘ì‚¬ê°€. JSON ì‘ë‹µ: {"lyrics": "string"}`;
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: `í˜„ì¬ê°€ì‚¬: ${editableLyrics}\nìš”ì²­: ${revisionPrompt}` }] }], systemInstruction: { parts: [{ text: systemPrompt }] }, generationConfig: { responseMimeType: "application/json" } })
                    });
                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (text) { setEditableLyrics(JSON.parse(text).lyrics); setRevisionPrompt(''); showToast('ìˆ˜ì • ì™„ë£Œ!'); }
                } catch (e) { showToast('ì˜¤ë¥˜ ë°œìƒ'); } finally { setIsGenerating(false); }
            };

            const handleGenerate = async (lang = 'ko') => {
                if (!apiKey) { setShowApiModal(true); return; }
                setIsGenerating(true); setHasResult(false);
                const styleInstruction = `Generate a long, highly detailed music style prompt in English for Suno AI.`;
                const systemPrompt = lang === 'en'
                    ? `Master Producer. ${styleInstruction} JSON: {"style_prompt": "string", "lyrics": "string"}`
                    : `ë§ˆìŠ¤í„° í”„ë¡œë“€ì„œ. ê°€ì‚¬ëŠ” í•œêµ­ì–´, 'style_prompt'ëŠ” ë¬´ì¡°ê±´ ì˜ì–´ë¡œë§Œ ê¸¸ê²Œ ì‘ì„±. JSON: {"style_prompt": "string", "lyrics": "string"}`;
                
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST', headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ contents: [{ parts: [{ text: `ì œëª©: ${title}, ì¥ë¥´: ${selectedGenres.join(',')}, ì˜ê°: ${prompt}` }] }], systemInstruction: { parts: [{ text: systemPrompt }] }, generationConfig: { responseMimeType: "application/json" } })
                    });
                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (text) {
                        const parsed = JSON.parse(text);
                        setEditableStyle(parsed.style_prompt); setEditableLyrics(parsed.lyrics); setHasResult(true);
                    }
                } catch (e) { showToast('ìƒì„± ì‹¤íŒ¨'); } finally { setIsGenerating(false); }
            };

            const copyToClipboard = (text, type) => {
                const textArea = document.createElement("textarea"); textArea.value = text; document.body.appendChild(textArea); textArea.select(); document.execCommand('copy'); document.body.removeChild(textArea);
                setCopyStatus(prev => ({ ...prev, [type]: true })); setTimeout(() => setCopyStatus(prev => ({ ...prev, [type]: false })), 2000);
            };

            if (!isEntered) {
                return (
                    <div className="fixed inset-0 z-[200] bg-slate-950 flex flex-col items-center justify-center overflow-hidden text-center">
                        {[...Array(30)].map((_, i) => (<div key={i} className="star" style={{ top: `${Math.random() * 100}%`, left: `${Math.random() * 100}%`, width: '3px', height: '3px', '--duration': `${3 + Math.random() * 3}s`, position: 'absolute', background: 'white', borderRadius: '50%' }} />))}
                        <div className="relative flex flex-col items-center space-y-12 animate-in fade-in zoom-in duration-1000">
                            <div className="flex items-center justify-center gap-10">
                                <div className="animate-float text-blue-400 shadow-blue-500/20"><Icon name="Music" size={80} /></div>
                                <div className="animate-rotate-slow text-purple-400"><Icon name="Disc" size={110} /></div>
                                <div className="animate-float text-pink-400 shadow-pink-500/20"><Icon name="Mic" size={80} /></div>
                            </div>
                            <h1 className="text-7xl font-black bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 uppercase tracking-tighter">Electoy Studio</h1>
                            <button onClick={() => setIsEntered(true)} className="px-24 py-8 bg-purple-600 rounded-full font-black text-2xl text-white shadow-[0_0_40px_rgba(168,85,247,0.7)] active:scale-95 transition-all flex items-center gap-5 animate-pulse-glow uppercase tracking-widest">START PRODUCTION</button>
                        </div>
                        <div className="absolute bottom-10 text-slate-700 font-black text-xs uppercase tracking-[0.6em] opacity-40">Electoy Studio â€¢ Master v11.5</div>
                    </div>
                );
            }

            return (
                <div className="app-container text-slate-100 bg-slate-950 text-left">
                    <header className="shrink-0 bg-slate-900/90 backdrop-blur-md border-b-2 border-slate-800 p-6 flex items-center justify-between sticky top-0 z-50">
                        <div className="flex items-center gap-4 text-left"><div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-2xl flex items-center justify-center shadow-lg text-white"><Icon name="Music" size={24} /></div><h1 className="font-black text-2xl uppercase tracking-tight text-left">Electoy Studio</h1></div>
                        <div className="flex items-center gap-3 text-left"><button onClick={() => showToast("ì£¼ì†Œ ë³µì‚¬ë¨!")} className="p-4 rounded-xl bg-slate-800 text-blue-400 hover:bg-slate-700 transition-all shadow-inner text-left"><Icon name="Share" size={24} /></button><button onClick={() => setShowApiModal(true)} className={`p-4 rounded-xl ${apiKey ? 'text-green-400 bg-green-900/30' : 'text-slate-400 bg-slate-800'} shadow-inner text-left`}><Icon name="Key" size={24} /></button></div>
                    </header>
                    <main className="flex-1 overflow-y-auto custom-scrollbar p-8 space-y-12 pb-56 text-left">
                        {toast.show && <div className="fixed top-28 left-1/2 -translate-x-1/2 z-[200] px-10 py-5 bg-purple-600 text-white font-black text-xl rounded-full shadow-2xl animate-bounce text-center">{toast.message}</div>}
                        
                        <section className="space-y-4"><label className="text-sm font-black text-slate-500 uppercase tracking-widest ml-2">Project Title</label><input type="text" value={title} onChange={(e) => setTitle(e.target.value)} placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”..." className="w-full bg-slate-900 border-2 border-slate-800 rounded-2xl px-8 py-5 text-2xl font-bold outline-none focus:border-purple-500 shadow-inner" /></section>
                        
                        <section className="space-y-6 text-left">
                            <label className="text-sm font-black text-slate-500 uppercase ml-2 flex items-center gap-4 text-left"><Icon name="Sparkles" size={20} /> ìŠ¤íƒ€ì¼ í”„ë¦¬ì…‹ ë¼ì´ë¸ŒëŸ¬ë¦¬</label>
                            <div className="flex flex-wrap gap-2 text-left">
                                {themes.map(cat => (
                                    <button key={cat.category} onClick={() => setActiveThemeTab(cat.category)} className={`px-4 py-2 text-sm font-black rounded-lg transition-all ${activeThemeTab === cat.category ? 'active-tab' : 'bg-slate-900 text-slate-500 border border-slate-800'}`}>{cat.category}</button>
                                ))}
                            </div>
                            <div className="grid grid-cols-2 sm:grid-cols-3 gap-3 text-left">
                                {themes.find(t => t.category === activeThemeTab)?.items.map(item => (
                                    <button 
                                        key={item.id} 
                                        onClick={() => { 
                                            setSelectedGenres([item.genre]); 
                                            setSelectedMoods([item.mood]); 
                                            setVocalType(item.vocal); 
                                            setBpm(item.bpm); 
                                            showToast(`'${item.label}' ì ìš©!`); 
                                        }} 
                                        className="px-5 py-4 bg-slate-900 border border-slate-800 rounded-2xl text-base font-bold text-slate-300 hover:border-purple-500 transition-all shadow-lg active:scale-95 text-left leading-tight h-full"
                                    >
                                        {item.label}
                                    </button>
                                ))}
                            </div>
                        </section>

                        <section className="grid grid-cols-2 gap-6 text-left">
                            <div className="space-y-4 text-left"><label className="text-sm font-black text-slate-500 ml-2 uppercase text-left">ì¥ë¥´</label><div className="h-80 overflow-y-auto border-2 border-slate-800 rounded-[2rem] bg-slate-900/40 p-4 custom-scrollbar text-left">{genresList.map(g => (<button key={g} onClick={() => setSelectedGenres(prev => prev.includes(g) ? (prev.length > 1 ? prev.filter(i => i !== g) : prev) : (prev.length < 3 ? [...prev, g] : prev))} className={`w-full text-left px-6 py-5 rounded-2xl mb-2 text-xl font-bold transition-all ${selectedGenres.includes(g) ? 'bg-purple-600 text-white' : 'text-slate-500 hover:bg-slate-800'}`}>{g}</button>))}</div></div>
                            <div className="space-y-4 text-left"><label className="text-sm font-black text-slate-500 ml-2 uppercase text-left">ë¬´ë“œ</label><div className="h-80 overflow-y-auto border-2 border-slate-800 rounded-[2rem] bg-slate-900/40 p-4 custom-scrollbar text-left">{moodsList.map(m => (<button key={m} onClick={() => setSelectedMoods(prev => prev.includes(m) ? (prev.length > 1 ? prev.filter(i => i !== m) : prev) : (prev.length < 3 ? [...prev, m] : prev))} className={`w-full text-left px-6 py-5 rounded-2xl mb-2 text-xl font-bold transition-all ${selectedMoods.includes(m) ? 'bg-pink-600 text-white' : 'text-slate-500 hover:bg-slate-800'}`}>{m}</button>))}</div></div>
                        </section>

                        <section className="bg-slate-900 border-2 border-slate-800 rounded-[3rem] p-8 space-y-10 shadow-2xl text-left">
                            <div className="flex justify-between items-center text-left"><label className="text-xl font-black text-slate-500 uppercase tracking-widest text-left">ìƒì„¸ ì„¤ì •</label><button onClick={() => setVocalType(isInstrumental ? 'ì—¬ì„± ë³´ì»¬' : 'ì—°ì£¼ê³¡ (Instrumental)')} className={`px-8 py-4 rounded-xl text-lg font-black transition-all ${isInstrumental ? 'bg-purple-600 text-white shadow-lg border-2 border-purple-400' : 'bg-slate-800 text-slate-500'}`}>ì—°ì£¼ê³¡ ëª¨ë“œ {isInstrumental ? 'ON' : 'OFF'}</button></div>
                            {isInstrumental && (<div className="grid grid-cols-2 gap-4 pb-4 animate-in zoom-in-95 text-left">{instrumentalSubStyles.map(s => (<button key={s.id} onClick={() => { setSelectedGenres([s.genre]); setSelectedMoods([s.mood]); setInstrument(s.inst); setBpm(s.bpm); showToast(`'${s.label}' ìµœì í™”!`); }} className="p-5 bg-slate-950 border-2 border-slate-800 rounded-2xl text-lg font-bold text-slate-300 text-left hover:border-purple-400 transition-all shadow-lg text-left">{s.label}</button>))}</div>)}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 text-left"><button onClick={() => setShowPersonaModal(true)} className="p-8 bg-slate-950 border-2 border-slate-800 rounded-[2.5rem] text-left border-l-[12px] border-l-purple-500 active:scale-95 transition-all shadow-xl min-h-[160px] text-left"><div className="text-base text-purple-400 font-black mb-4 uppercase tracking-widest text-left">{persona.gender} {persona.age}</div><div className="text-2xl font-black leading-snug text-left">ë³´ì»¬ í˜ë¥´ì†Œë‚˜ ì„¤ì •</div></button><div className="space-y-6 text-left"><select value={instrument} onChange={(e) => setInstrument(e.target.value)} className="w-full bg-slate-950 border-2 border-slate-800 rounded-[1.5rem] p-6 text-xl font-bold text-white outline-none appearance-none shadow-inner text-left">{instrumentsList.map(i => <option key={i} value={i}>{i}</option>)}</select><select value={vocalType} onChange={(e) => setVocalType(e.target.value)} className="w-full bg-slate-950 border-2 border-slate-800 rounded-[1.5rem] p-6 text-xl font-bold text-white outline-none appearance-none shadow-inner text-left">{vocalOptions.map(o => <option key={o} value={o}>{o}</option>)}</select></div></div>
                            
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 pt-6 border-t border-slate-800 text-left">
                                <div className="space-y-4 text-left"><div className="flex justify-between text-sm font-black text-slate-400 uppercase tracking-widest text-left"><span>BPM (ìŒì•… ì†ë„)</span><span className="text-purple-400 text-2xl font-mono text-left">{bpm}</span></div><input type="range" min="40" max="200" value={bpm} onChange={(e) => setBpm(parseInt(e.target.value))} className="w-full h-3 cursor-pointer rounded-lg appearance-none bg-slate-800 text-left" /></div>
                                <div className="space-y-4 text-left"><div className="flex justify-between text-sm font-black text-slate-400 uppercase tracking-widest text-left"><span>ê³¡ ê¸¸ì´ (Duration)</span><span className="text-pink-400 text-2xl font-mono text-left">{duration}s</span></div><input type="range" min="30" max="360" step="10" value={duration} onChange={(e) => setDuration(parseInt(e.target.value))} className="w-full h-3 cursor-pointer rounded-lg appearance-none bg-slate-800 text-left" /></div>
                            </div>
                        </section>

                        <section className="space-y-8 text-left"><textarea value={prompt} onChange={(e) => setPrompt(e.target.value)} placeholder="ìŒì•…ì  ì•„ì´ë””ì–´ë¥¼ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”..." className="w-full bg-slate-950 border-2 border-slate-800 rounded-[3rem] p-10 h-80 text-2xl font-bold outline-none focus:border-purple-500 transition-all text-white shadow-inner leading-relaxed text-left" /><div className="grid grid-cols-2 gap-8 text-white text-left"><button onClick={() => handleGenerate('ko')} disabled={isGenerating} className="py-10 bg-gradient-to-tr from-purple-600 to-pink-600 rounded-[2.5rem] font-black text-3xl shadow-xl flex items-center justify-center gap-6 active:scale-95 transition-all text-center">{isGenerating ? <Icon name="Refresh" className="animate-spin" size={32} /> : <Icon name="Sparkles" size={32} />} ìƒì„±</button><button onClick={() => handleGenerate('en')} disabled={isGenerating} className="py-10 bg-slate-800 border-2 border-slate-700 rounded-[2.5rem] font-black text-3xl text-blue-400 flex items-center justify-center gap-6 active:scale-95 shadow-xl text-center">ENGLISH</button></div></section>

                        <section className="pt-24 border-t-4 border-slate-900 space-y-16 text-left text-left">
                            {hasResult && (
                                <div className="space-y-20 animate-in slide-in-from-bottom-10 duration-700 text-left">
                                    <div className="bg-slate-900 border-2 border-slate-800 rounded-[4rem] p-12 border-l-[24px] border-l-purple-500 shadow-2xl overflow-hidden text-left text-left">
                                        <div className="flex justify-between items-center mb-10 text-left"><span className="text-2xl font-black text-purple-400 uppercase tracking-widest text-left">ê°€ì‚¬ (Structured Lyrics)</span><button onClick={() => copyToClipboard(editableLyrics, 'lyrics')} className="p-6 bg-slate-800 rounded-[2rem] shadow-lg active:scale-90 text-center">{copyStatus.lyrics ? <Icon name="Check" size={32} className="text-green-400" /> : <Icon name="Copy" size={32} />}</button></div>
                                        <textarea className="editable-area h-[800px] text-left" value={editableLyrics} onChange={(e) => setEditableLyrics(e.target.value)} />
                                        <div className="mt-12 p-10 bg-slate-950/60 rounded-[3rem] border-2 border-dashed border-slate-700 space-y-8 text-left">
                                            <label className="text-lg font-black text-slate-500 uppercase flex items-center gap-5 tracking-widest text-left"><Icon name="Pencil" size={20} /> AI ê°€ì‚¬ ìˆ˜ì • ë¹„ì„œ</label>
                                            <input type="text" value={revisionPrompt} onChange={(e) => setRevisionPrompt(e.target.value)} placeholder="ìˆ˜ì • ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." className="revision-input text-2xl text-white shadow-inner text-left" />
                                            <button onClick={handleRefineLyrics} className="w-full py-8 bg-slate-800 hover:bg-slate-700 rounded-3xl text-2xl font-black border-2 border-slate-700 transition-all text-white shadow-xl text-center">ìˆ˜ì • ìš”ì²­í•˜ê¸°</button>
                                        </div>
                                    </div>
                                    <div className="bg-slate-900 border-2 border-slate-800 rounded-[4rem] p-12 border-l-[24px] border-l-pink-500 shadow-2xl text-left">
                                        <div className="flex justify-between items-center mb-10 text-left"><span className="text-2xl font-black text-pink-400 uppercase tracking-widest text-left">ìŠ¤íƒ€ì¼ (English Tags Only)</span><button onClick={() => copyToClipboard(editableStyle, 'style')} className="p-6 bg-slate-800 rounded-[2rem] shadow-lg active:scale-90 text-center">{copyStatus.style ? <Icon name="Check" size={32} className="text-green-400" /> : <Icon name="Copy" size={32} />}</button></div>
                                        <textarea className="editable-area h-64 font-mono text-pink-100 shadow-inner font-bold text-left" value={editableStyle} onChange={(e) => setEditableStyle(e.target.value)} />
                                    </div>
                                </div>
                            )}
                        </section>
                    </main>
                    
                    {showApiModal && (<div className="fixed inset-0 z-[300] modal-overlay flex items-center justify-center p-12 text-left" onClick={() => setShowApiModal(false)}><div className="bg-slate-900 border-4 border-slate-700 w-full rounded-[4rem] p-16 space-y-12 text-left animate-in zoom-in-95 shadow-2xl text-left" onClick={e => e.stopPropagation()}><div className="flex justify-between items-center text-left text-left"><h3 className="font-black text-4xl text-green-400 uppercase tracking-widest text-left">API Key Setup</h3><div className="cursor-pointer text-slate-500 hover:text-white" onClick={() => setShowApiModal(false)}><Icon name="X" size={48} /></div></div><input type="password" placeholder="Key ì…ë ¥..." value={apiKey} onChange={(e) => setApiKey(e.target.value)} className="w-full bg-slate-800 border-2 border-slate-700 rounded-[2rem] p-10 text-5xl text-white shadow-inner focus:border-purple-500 text-left text-left" autoFocus /><button onClick={() => setShowApiModal(false)} className="w-full bg-purple-600 py-10 rounded-[2.5rem] font-black text-4xl shadow-xl active:scale-95 text-white text-left text-center">Save</button></div></div>)}
                    {showPersonaModal && (
                        <div className="fixed inset-0 z-[300] modal-overlay flex items-center justify-center p-12 text-left" onClick={() => setShowPersonaModal(false)}>
                            <div className="bg-slate-900 border-4 border-slate-700 w-full max-h-[85vh] overflow-y-auto rounded-[4rem] p-16 space-y-14 animate-in zoom-in-95 custom-scrollbar shadow-2xl text-left" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center border-b-2 border-slate-800 pb-10 text-left"><h3 className="font-black text-4xl text-purple-400 uppercase tracking-widest text-left">Vocal Persona</h3><div className="cursor-pointer text-slate-500 hover:text-white" onClick={() => setShowPersonaModal(false)}><Icon name="X" size={48} /></div></div>
                                <div className="space-y-10 text-left">
                                    {[{ key: 'gender', label: 'ì„±ë³„', opts: ['ì—¬ì„±', 'ë‚¨ì„±', 'ì¤‘ì„±ì '] },{ key: 'age', label: 'ì—°ë ¹ëŒ€', opts: ['10ëŒ€', '20ëŒ€', '30ëŒ€', 'ì¤‘í›„í•œ'] },{ key: 'tone', label: 'í†¤', opts: ['ë§‘ê³  ê¹¨ë—í•œ', 'í—ˆìŠ¤í‚¤í•œ', 'íŒŒì›Œí’€í•œ', 'ê°ë¯¸ë¡œìš´', 'ë‚ ì¹´ë¡œìš´'] },{ key: 'style', label: 'ì°½ë²•', opts: ['ê°ì„±ì ì¸', 'ê¸°êµìˆëŠ”', 'ë‹´ë°±í•œ', 'íëŠë¼ëŠ”', 'ì ˆì œëœ'] }].map(item => (
                                        <div key={item.key} className="space-y-6 text-left">
                                            <label className="text-xl font-black text-slate-500 uppercase ml-4 text-left">{item.label}</label>
                                            <select value={persona[item.key]} onChange={(e) => setPersona(prev => ({ ...prev, [item.key]: e.target.value }))} className="w-full bg-slate-800 border-2 border-slate-800 rounded-[2rem] p-10 text-3xl font-bold text-white shadow-inner focus:border-purple-500 outline-none text-left">
                                                {item.opts.map(o => <option key={o} value={o}>{o}</option>)}
                                            </select>
                                        </div>
                                    ))}
                                </div>
                                <button onClick={() => setShowPersonaModal(false)} className="w-full bg-purple-600 py-10 rounded-[2.5rem] font-black text-4xl shadow-xl active:scale-95 text-white text-left text-center">Apply</button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(React.createElement(App));
    </script>
</body>
</html>